"use strict";(self["webpackChunkakiyuki"]=self["webpackChunkakiyuki"]||[]).push([[680],{3270:function(e,a,l){l.r(a),l.d(a,{default:function(){return B}});l(4645),l(9063),l(988);var t=l(4220),n=l(7700),r=l(6732);const u={class:"q-gutter-md q-mt-md"},i={class:"q-gutter-md q-mt-md row"},o={class:"row items-center"},s={class:"q-mr-md"},v=800,c=600;var d={__name:"BoidsAlgorithm",setup(e){const a=(0,r.KR)(null),l=(0,r.KR)([]);let d=null;const m=(0,r.KR)(50),b=(0,r.KR)([{label:"分離重み",value:1.5,min:0,max:5,step:.1,key:"separationWeight"},{label:"整列重み",value:1,min:0,max:5,step:.1,key:"alignmentWeight"},{label:"結合重み",value:1,min:0,max:5,step:.1,key:"cohesionWeight"},{label:"分離距離",value:20,min:10,max:100,step:1,key:"separationDistance"},{label:"整列距離",value:50,min:10,max:200,step:1,key:"alignmentDistance"},{label:"結合距離",value:100,min:10,max:300,step:1,key:"cohesionDistance"},{label:"最大速度",value:.5,min:.1,max:2,step:.1,key:"maxSpeed"}]),h=(0,r.KR)({separationWeight:1.5,alignmentWeight:1,cohesionWeight:1,separationDistance:20,alignmentDistance:50,cohesionDistance:100,maxSpeed:.5});(0,t.wB)(b,(e=>{e.forEach((e=>{h.value[e.key]=e.value}))}),{deep:!0});const p=()=>{l.value=[];for(let e=0;e<m.value;e++)l.value.push({x:Math.random()*(v-10)+5,y:Math.random()*(c-10)+5,vx:2*Math.random()-1,vy:2*Math.random()-1,ax:0,ay:0})},g=()=>{l.value.forEach((e=>{let a=0,t=0,n=0;l.value.forEach((l=>{if(l!==e){let r=e.x-l.x;Math.abs(r)>v/2&&(r=v-Math.abs(r),e.x<l.x&&(r=-r));let u=e.y-l.y;Math.abs(u)>c/2&&(u=c-Math.abs(u),e.y<l.y&&(u=-u));const i=Math.sqrt(r**2+u**2);i<h.value.separationDistance&&(a+=r/i,t+=u/i,n++)}})),n>0&&(a/=n,t/=n,e.ax+=a*h.value.separationWeight,e.ay+=t*h.value.separationWeight);let r=0,u=0,i=0;l.value.forEach((a=>{if(a!==e){let l=e.x-a.x;Math.abs(l)>v/2&&(l=v-Math.abs(l),e.x<a.x&&(l=-l));let t=e.y-a.y;Math.abs(t)>c/2&&(t=c-Math.abs(t),e.y<a.y&&(t=-t));const n=Math.sqrt(l**2+t**2);n<h.value.alignmentDistance&&(r+=a.vx,u+=a.vy,i++)}})),i>0&&(r/=i,u/=i,e.ax+=(r-e.vx)*h.value.alignmentWeight/8,e.ay+=(u-e.vy)*h.value.alignmentWeight/8);let o=0,s=0,d=0;if(l.value.forEach((a=>{if(a!==e){let l=e.x-a.x;Math.abs(l)>v/2&&(l=v-Math.abs(l),e.x<a.x&&(l=-l));let t=e.y-a.y;Math.abs(t)>c/2&&(t=c-Math.abs(t),e.y<a.y&&(t=-t));const n=Math.sqrt(l**2+t**2);n<h.value.cohesionDistance&&(o+=a.x,s+=a.y,d++)}})),d>0){o/=d,s/=d;let a=o-e.x;Math.abs(a)>v/2&&(a=v-Math.abs(a),e.x<o&&(a=-a));let l=s-e.y;Math.abs(l)>c/2&&(l=c-Math.abs(l),e.y<s&&(l=-l)),e.ax+=a*h.value.cohesionWeight/100,e.ay+=l*h.value.cohesionWeight/100}e.vx+=e.ax,e.vy+=e.ay;const m=Math.sqrt(e.vx**2+e.vy**2);m>h.value.maxSpeed&&(e.vx=e.vx/m*h.value.maxSpeed,e.vy=e.vy/m*h.value.maxSpeed),e.x+=e.vx,e.y+=e.vy,e.ax=0,e.ay=0,e.x<5?e.x=v-5:e.x>v-5&&(e.x=5),e.y<5?e.y=c-5:e.y>c-5&&(e.y=5)}))},x=()=>{const e=a.value.getContext("2d");e.clearRect(0,0,v,c),l.value.forEach((a=>{e.beginPath(),e.arc(a.x,a.y,5,0,2*Math.PI),e.fillStyle="orange",e.fill()}))},y=()=>{g(),x(),d=requestAnimationFrame(y)},k=()=>{d||y()},f=()=>{d&&(cancelAnimationFrame(d),d=null)};return(0,t.wB)(m,(()=>{p()})),(0,t.sV)((()=>{p()})),(0,t.hi)((()=>{f()})),(e,l)=>{const r=(0,t.g2)("q-btn"),d=(0,t.g2)("q-slider"),h=(0,t.g2)("q-page");return(0,t.uX)(),(0,t.Wv)(h,{class:"flex flex-center column"},{default:(0,t.k6)((()=>[l[4]||(l[4]=(0,t.Lk)("div",{class:"q-mb-lg"},[(0,t.Lk)("span",{class:"text-h3"},"Boids Algorithm")],-1)),(0,t.Lk)("div",null,[(0,t.Lk)("div",{class:"border",style:(0,n.Tr)({width:`${v+25}px`,height:`${c+25}px`})},[(0,t.Lk)("canvas",{class:"q-ma-sm",ref_key:"canvas",ref:a,width:v,height:c},null,512)],4)]),(0,t.Lk)("div",u,[(0,t.bF)(r,{outline:"",onClick:k},{default:(0,t.k6)((()=>l[1]||(l[1]=[(0,t.eW)("アニメーション開始")]))),_:1}),(0,t.bF)(r,{outline:"",onClick:f},{default:(0,t.k6)((()=>l[2]||(l[2]=[(0,t.eW)("アニメーション停止")]))),_:1})]),(0,t.Lk)("div",i,[(0,t.Lk)("div",o,[l[3]||(l[3]=(0,t.Lk)("span",{class:"q-mr-md"},"個体数",-1)),(0,t.bF)(d,{modelValue:m.value,"onUpdate:modelValue":l[0]||(l[0]=e=>m.value=e),"label-always":"","label-color":"grey-8","label-text-color":"white","switch-marker-labels-side":"","switch-label-side":"",markers:"",min:10,max:100,step:1},null,8,["modelValue"])]),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(b.value,((e,a)=>((0,t.uX)(),(0,t.CE)("div",{key:a,class:"row items-center"},[(0,t.Lk)("span",s,(0,n.v_)(e.label),1),(0,t.bF)(d,{modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,"label-always":"","label-color":"grey-8","label-text-color":"white","switch-marker-labels-side":"","switch-label-side":"",markers:"",min:e.min,max:e.max,step:e.step},null,8,["modelValue","onUpdate:modelValue","min","max","step"])])))),128))])])),_:1})}}},m=l(1399),b=l(3197),h=l(3749),p=(l(3665),l(6029),l(2617)),g=l(5471),x=l(6631),y=l(5055),k=l(8445),f=l(1952);const W="q-slider__marker-labels",E=e=>({value:e}),M=({marker:e})=>(0,t.h)("div",{key:e.value,style:e.style,class:e.classes},e.label),q=[34,37,40,33,39,38],C={...g.C,...h.Sc,min:{type:Number,default:0},max:{type:Number,default:100},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:e=>e>=0},snap:Boolean,vertical:Boolean,reverse:Boolean,color:String,markerLabelsClass:String,label:Boolean,labelColor:String,labelTextColor:String,labelAlways:Boolean,switchLabelSide:Boolean,markers:[Boolean,Number],markerLabels:[Boolean,Array,Object,Function],switchMarkerLabelsSide:Boolean,trackImg:String,trackColor:String,innerTrackImg:String,innerTrackColor:String,selectionColor:String,selectionImg:String,thumbSize:{type:String,default:"20px"},trackSize:{type:String,default:"4px"},disable:Boolean,readonly:Boolean,dense:Boolean,tabindex:[String,Number],thumbColor:String,thumbPath:{type:String,default:"M 4, 10 a 6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"}},S=["pan","update:modelValue","change"];function w({updateValue:e,updatePosition:a,getDragging:l,formAttrs:n}){const{props:u,emit:i,slots:o,proxy:{$q:s}}=(0,t.nI)(),v=(0,g.A)(u,s),c=(0,h.vq)(n),d=(0,r.KR)(!1),m=(0,r.KR)(!1),b=(0,r.KR)(!1),C=(0,r.KR)(!1),S=(0,t.EW)((()=>!0===u.vertical?"--v":"--h")),w=(0,t.EW)((()=>"-"+(!0===u.switchLabelSide?"switched":"standard"))),$=(0,t.EW)((()=>!0===u.vertical?!0===u.reverse:u.reverse!==(!0===s.lang.rtl))),_=(0,t.EW)((()=>!0===isNaN(u.innerMin)||u.innerMin<u.min?u.min:u.innerMin)),L=(0,t.EW)((()=>!0===isNaN(u.innerMax)||u.innerMax>u.max?u.max:u.innerMax)),R=(0,t.EW)((()=>!0!==u.disable&&!0!==u.readonly&&_.value<L.value)),V=(0,t.EW)((()=>{if(0===u.step)return e=>e;const e=(String(u.step).trim().split(".")[1]||"").length;return a=>parseFloat(a.toFixed(e))})),T=(0,t.EW)((()=>0===u.step?1:u.step)),B=(0,t.EW)((()=>!0===R.value?u.tabindex||0:-1)),A=(0,t.EW)((()=>u.max-u.min)),F=(0,t.EW)((()=>L.value-_.value)),K=(0,t.EW)((()=>ue(_.value))),I=(0,t.EW)((()=>ue(L.value))),D=(0,t.EW)((()=>!0===u.vertical?!0===$.value?"bottom":"top":!0===$.value?"right":"left")),N=(0,t.EW)((()=>!0===u.vertical?"height":"width")),z=(0,t.EW)((()=>!0===u.vertical?"width":"height")),P=(0,t.EW)((()=>!0===u.vertical?"vertical":"horizontal")),G=(0,t.EW)((()=>{const e={role:"slider","aria-valuemin":_.value,"aria-valuemax":L.value,"aria-orientation":P.value,"data-step":u.step};return!0===u.disable?e["aria-disabled"]="true":!0===u.readonly&&(e["aria-readonly"]="true"),e})),j=(0,t.EW)((()=>`q-slider q-slider${S.value} q-slider--${!0===d.value?"":"in"}active inline no-wrap `+(!0===u.vertical?"row":"column")+(!0===u.disable?" disabled":" q-slider--enabled"+(!0===R.value?" q-slider--editable":""))+("both"===b.value?" q-slider--focus":"")+(u.label||!0===u.labelAlways?" q-slider--label":"")+(!0===u.labelAlways?" q-slider--label-always":"")+(!0===v.value?" q-slider--dark":"")+(!0===u.dense?" q-slider--dense q-slider--dense"+S.value:"")));function Q(e){const a="q-slider__"+e;return`${a} ${a}${S.value} ${a}${S.value}${w.value}`}function X(e){const a="q-slider__"+e;return`${a} ${a}${S.value}`}const U=(0,t.EW)((()=>{const e=u.selectionColor||u.color;return"q-slider__selection absolute"+(void 0!==e?` text-${e}`:"")})),O=(0,t.EW)((()=>X("markers")+" absolute overflow-hidden")),H=(0,t.EW)((()=>X("track-container"))),J=(0,t.EW)((()=>Q("pin"))),Y=(0,t.EW)((()=>Q("label"))),Z=(0,t.EW)((()=>Q("text-container"))),ee=(0,t.EW)((()=>Q("marker-labels-container")+(void 0!==u.markerLabelsClass?` ${u.markerLabelsClass}`:""))),ae=(0,t.EW)((()=>"q-slider__track relative-position no-outline"+(void 0!==u.trackColor?` bg-${u.trackColor}`:""))),le=(0,t.EW)((()=>{const e={[z.value]:u.trackSize};return void 0!==u.trackImg&&(e.backgroundImage=`url(${u.trackImg}) !important`),e})),te=(0,t.EW)((()=>"q-slider__inner absolute"+(void 0!==u.innerTrackColor?` bg-${u.innerTrackColor}`:""))),ne=(0,t.EW)((()=>{const e=I.value-K.value,a={[D.value]:100*K.value+"%",[N.value]:0===e?"2px":100*e+"%"};return void 0!==u.innerTrackImg&&(a.backgroundImage=`url(${u.innerTrackImg}) !important`),a}));function re(e){const{min:a,max:l,step:t}=u;let n=a+e*(l-a);if(t>0){const e=(n-_.value)%t;n+=(Math.abs(e)>=t/2?(e<0?-1:1)*t:0)-e}return n=V.value(n),(0,x.Tq)(n,_.value,L.value)}function ue(e){return 0===A.value?0:(e-u.min)/A.value}function ie(e,a){const l=(0,y.G1)(e),t=!0===u.vertical?(0,x.Tq)((l.top-a.top)/a.height,0,1):(0,x.Tq)((l.left-a.left)/a.width,0,1);return(0,x.Tq)(!0===$.value?1-t:t,K.value,I.value)}const oe=(0,t.EW)((()=>!0===(0,k.Et)(u.markers)?u.markers:T.value)),se=(0,t.EW)((()=>{const e=[],a=oe.value,l=u.max;let t=u.min;do{e.push(t),t+=a}while(t<l);return e.push(l),e})),ve=(0,t.EW)((()=>{const e=` ${W}${S.value}-`;return W+`${e}${!0===u.switchMarkerLabelsSide?"switched":"standard"}`+`${e}${!0===$.value?"rtl":"ltr"}`})),ce=(0,t.EW)((()=>!1===u.markerLabels?null:be(u.markerLabels).map(((e,a)=>({index:a,value:e.value,label:e.label||e.value,classes:ve.value+(void 0!==e.classes?" "+e.classes:""),style:{...he(e.value),...e.style||{}}}))))),de=(0,t.EW)((()=>({markerList:ce.value,markerMap:pe.value,classes:ve.value,getStyle:he}))),me=(0,t.EW)((()=>{const e=0===F.value?"2px":100*oe.value/F.value;return{...ne.value,backgroundSize:!0===u.vertical?`2px ${e}%`:`${e}% 2px`}}));function be(e){if(!1===e)return null;if(!0===e)return se.value.map(E);if("function"===typeof e)return se.value.map((a=>{const l=e(a);return!0===(0,k.Gv)(l)?{...l,value:a}:{value:a,label:l}}));const a=({value:e})=>e>=u.min&&e<=u.max;return!0===Array.isArray(e)?e.map((e=>!0===(0,k.Gv)(e)?e:{value:e})).filter(a):Object.keys(e).map((a=>{const l=e[a],t=Number(a);return!0===(0,k.Gv)(l)?{...l,value:t}:{value:t,label:l}})).filter(a)}function he(e){return{[D.value]:100*(e-u.min)/A.value+"%"}}const pe=(0,t.EW)((()=>{if(!1===u.markerLabels)return null;const e={};return ce.value.forEach((a=>{e[a.value]=a})),e}));function ge(){if(void 0!==o["marker-label-group"])return o["marker-label-group"](de.value);const e=o["marker-label"]||M;return ce.value.map((a=>e({marker:a,...de.value})))}const xe=(0,t.EW)((()=>[[p.A,ye,void 0,{[P.value]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]));function ye(t){!0===t.isFinal?(void 0!==C.value&&(a(t.evt),!0===t.touch&&e(!0),C.value=void 0,i("pan","end")),d.value=!1,b.value=!1):!0===t.isFirst?(C.value=l(t.evt),a(t.evt),e(),d.value=!0,i("pan","start")):(a(t.evt),e())}function ke(){b.value=!1}function fe(t){a(t,l(t)),e(),m.value=!0,d.value=!0,document.addEventListener("mouseup",We,!0)}function We(){m.value=!1,d.value=!1,e(!0),ke(),document.removeEventListener("mouseup",We,!0)}function Ee(t){a(t,l(t)),e(!0)}function Me(a){q.includes(a.keyCode)&&e(!0)}function qe(e){if(!0===u.vertical)return null;const a=s.lang.rtl!==u.reverse?1-e:e;return{transform:`translateX(calc(${2*a-1} * ${u.thumbSize} / 2 + ${50-100*a}%))`}}function Ce(e){const a=(0,t.EW)((()=>!1!==m.value||b.value!==e.focusValue&&"both"!==b.value?"":" q-slider--focus")),l=(0,t.EW)((()=>`q-slider__thumb q-slider__thumb${S.value} q-slider__thumb${S.value}-${!0===$.value?"rtl":"ltr"} absolute non-selectable`+a.value+(void 0!==e.thumbColor.value?` text-${e.thumbColor.value}`:""))),n=(0,t.EW)((()=>({width:u.thumbSize,height:u.thumbSize,[D.value]:100*e.ratio.value+"%",zIndex:b.value===e.focusValue?2:void 0}))),r=(0,t.EW)((()=>void 0!==e.labelColor.value?` text-${e.labelColor.value}`:"")),i=(0,t.EW)((()=>qe(e.ratio.value))),o=(0,t.EW)((()=>"q-slider__text"+(void 0!==e.labelTextColor.value?` text-${e.labelTextColor.value}`:"")));return()=>{const a=[(0,t.h)("svg",{class:"q-slider__thumb-shape absolute-full",viewBox:"0 0 20 20","aria-hidden":"true"},[(0,t.h)("path",{d:u.thumbPath})]),(0,t.h)("div",{class:"q-slider__focus-ring fit"})];return!0!==u.label&&!0!==u.labelAlways||(a.push((0,t.h)("div",{class:J.value+" absolute fit no-pointer-events"+r.value},[(0,t.h)("div",{class:Y.value,style:{minWidth:u.thumbSize}},[(0,t.h)("div",{class:Z.value,style:i.value},[(0,t.h)("span",{class:o.value},e.label.value)])])])),void 0!==u.name&&!0!==u.disable&&c(a,"push")),(0,t.h)("div",{class:l.value,style:n.value,...e.getNodeData()},a)}}function Se(e,a,l,n){const r=[];"transparent"!==u.innerTrackColor&&r.push((0,t.h)("div",{key:"inner",class:te.value,style:ne.value})),"transparent"!==u.selectionColor&&r.push((0,t.h)("div",{key:"selection",class:U.value,style:e.value})),!1!==u.markers&&r.push((0,t.h)("div",{key:"marker",class:O.value,style:me.value})),n(r);const i=[(0,f.Kf)("div",{key:"trackC",class:H.value,tabindex:a.value,...l.value},[(0,t.h)("div",{class:ae.value,style:le.value},r)],"slide",R.value,(()=>xe.value))];if(!1!==u.markerLabels){const e=!0===u.switchMarkerLabelsSide?"unshift":"push";i[e]((0,t.h)("div",{key:"markerL",class:ee.value},ge()))}return i}return(0,t.xo)((()=>{document.removeEventListener("mouseup",We,!0)})),{state:{active:d,focus:b,preventFocus:m,dragging:C,editable:R,classes:j,tabindex:B,attributes:G,roundValueFn:V,keyStep:T,trackLen:A,innerMin:_,innerMinRatio:K,innerMax:L,innerMaxRatio:I,positionProp:D,sizeProp:N,isReversed:$},methods:{onActivate:fe,onMobileClick:Ee,onBlur:ke,onKeyup:Me,getContent:Se,getThumbRenderFn:Ce,convertRatioToModel:re,convertModelToRatio:ue,getDraggingRatio:ie}}}var $=l(9140);const _=()=>({});var L=(0,$.a0)({name:"QSlider",props:{...C,modelValue:{required:!0,default:null,validator:e=>"number"===typeof e||null===e},labelValue:[String,Number]},emits:S,setup(e,{emit:a}){const{proxy:{$q:l}}=(0,t.nI)(),{state:n,methods:u}=w({updateValue:g,updatePosition:f,getDragging:k,formAttrs:(0,h.mj)(e)}),i=(0,r.KR)(null),o=(0,r.KR)(0),s=(0,r.KR)(0);function v(){s.value=null===e.modelValue?n.innerMin.value:(0,x.Tq)(e.modelValue,n.innerMin.value,n.innerMax.value)}(0,t.wB)((()=>`${e.modelValue}|${n.innerMin.value}|${n.innerMax.value}`),v),v();const c=(0,t.EW)((()=>u.convertModelToRatio(s.value))),d=(0,t.EW)((()=>!0===n.active.value?o.value:c.value)),m=(0,t.EW)((()=>{const a={[n.positionProp.value]:100*n.innerMinRatio.value+"%",[n.sizeProp.value]:100*(d.value-n.innerMinRatio.value)+"%"};return void 0!==e.selectionImg&&(a.backgroundImage=`url(${e.selectionImg}) !important`),a})),b=u.getThumbRenderFn({focusValue:!0,getNodeData:_,ratio:d,label:(0,t.EW)((()=>void 0!==e.labelValue?e.labelValue:s.value)),thumbColor:(0,t.EW)((()=>e.thumbColor||e.color)),labelColor:(0,t.EW)((()=>e.labelColor)),labelTextColor:(0,t.EW)((()=>e.labelTextColor))}),p=(0,t.EW)((()=>!0!==n.editable.value?{}:!0===l.platform.is.mobile?{onClick:u.onMobileClick}:{onMousedown:u.onActivate,onFocus:W,onBlur:u.onBlur,onKeydown:E,onKeyup:u.onKeyup}));function g(l){s.value!==e.modelValue&&a("update:modelValue",s.value),!0===l&&a("change",s.value)}function k(){return i.value.getBoundingClientRect()}function f(a,l=n.dragging.value){const t=u.getDraggingRatio(a,l);s.value=u.convertRatioToModel(t),o.value=!0!==e.snap||0===e.step?t:u.convertModelToRatio(s.value)}function W(){n.focus.value=!0}function E(a){if(!1===q.includes(a.keyCode))return;(0,y.Gu)(a);const l=([34,33].includes(a.keyCode)?10:1)*n.keyStep.value,t=([34,37,40].includes(a.keyCode)?-1:1)*(!0===n.isReversed.value?-1:1)*(!0===e.vertical?-1:1)*l;s.value=(0,x.Tq)(n.roundValueFn.value(s.value+t),n.innerMin.value,n.innerMax.value),g()}return()=>{const a=u.getContent(m,n.tabindex,p,(e=>{e.push(b())}));return(0,t.h)("div",{ref:i,class:n.classes.value+(null===e.modelValue?" q-slider--no-value":""),...n.attributes.value,"aria-valuenow":e.modelValue},a)}}}),R=l(2110),V=l.n(R);const T=d;var B=T;V()(d,"components",{QPage:m.A,QBtn:b.A,QSlider:L})},3749:function(e,a,l){l.d(a,{M4:function(){return i},Sc:function(){return n},mj:function(){return r},vq:function(){return u}});var t=l(4220);const n={name:String};function r(e){return(0,t.EW)((()=>({type:"hidden",name:e.name,value:e.modelValue})))}function u(e={}){return(a,l,n)=>{a[l]((0,t.h)("input",{class:"hidden"+(n||""),...e.value}))}}function i(e){return(0,t.EW)((()=>e.name||e.for))}}}]);
//# sourceMappingURL=boids.732e9ac7.js.map