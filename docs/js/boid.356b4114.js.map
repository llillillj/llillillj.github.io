{"version":3,"file":"js/boid.356b4114.js","mappings":"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","sources":["webpack://akiyuki/./src/module/boid.ts","webpack://akiyuki/./src/views/BoidAlgorithm.vue?3b3d","webpack://akiyuki/./src/views/BoidAlgorithm.vue","webpack://akiyuki/./node_modules/quasar/src/composables/private.use-refocus-target/use-refocus-target.js","webpack://akiyuki/./node_modules/quasar/src/utils/private.option-sizes/option-sizes.js","webpack://akiyuki/./node_modules/quasar/src/components/checkbox/use-checkbox.js","webpack://akiyuki/./node_modules/quasar/src/components/toggle/QToggle.js","webpack://akiyuki/./node_modules/quasar/src/components/slider/use-slider.js","webpack://akiyuki/./node_modules/quasar/src/components/slider/QSlider.js","webpack://akiyuki/./src/views/BoidAlgorithm.vue?1eda","webpack://akiyuki/./node_modules/quasar/src/composables/use-form/private.use-form.js"],"sourcesContent":["// boid.ts\nimport { Ref, ref } from 'vue';\n\ninterface BoidParams {\n  separationDistance: number;\n  alignmentDistance: number;\n  cohesionDistance: number;\n  separationWeight: number;\n  alignmentWeight: number;\n  cohesionWeight: number;\n  maxSpeed: number;\n  fieldOfView: number;\n}\n\ninterface Vector {\n  x: number;\n  y: number;\n}\n\ninterface Bird {\n  x: number;\n  y: number;\n  vx: number;\n  vy: number;\n  angle: number;\n}\n\n// スライダーの値を保持するオブジェクト（リアクティブにする）\nexport const boidParams: Ref<BoidParams> = ref({\n  separationDistance: 20,\n  alignmentDistance: 50,\n  cohesionDistance: 100,\n  separationWeight: 1.0,\n  alignmentWeight: 1.0,\n  cohesionWeight: 1.0,\n  maxSpeed: 2.0,\n  fieldOfView: 90\n});\n\n// ベクトルの長さを制限する関数\nexport const limitVector = (vx: number, vy: number, max: number): Vector => {\n  let magnitude = Math.sqrt(vx * vx + vy * vy);\n  if (magnitude === 0) {\n    vx = (Math.random() * 2 - 1) * 0.1; // 小さなランダム値を与える\n    vy = (Math.random() * 2 - 1) * 0.1;\n    magnitude = Math.sqrt(vx * vx + vy * vy);\n  }\n  if (magnitude > max) {\n    const ratio = max / magnitude;\n    return { x: vx * ratio, y: vy * ratio };\n  }\n  return { x: vx, y: vy };\n};\n\n// 視野角内かどうかをチェックする関数\nexport const isInFieldOfView = (bird: Bird, other: Bird): boolean => {\n  const dx = other.x - bird.x;\n  const dy = other.y - bird.y;\n  const angleToOther = Math.atan2(dy, dx);\n  const angleDiff = Math.abs(angleToOther - bird.angle);\n  return angleDiff <= (boidParams.value.fieldOfView / 2) * (Math.PI / 180) ||\n         angleDiff >= 2 * Math.PI - (boidParams.value.fieldOfView / 2) * (Math.PI / 180);\n};\n\n// 分離力を計算（視野角を考慮）\nexport const calculateSeparation = (bird: Bird, neighbors: Bird[]): Vector => {\n  let fx = 0, fy = 0, count = 0;\n  neighbors.forEach(other => {\n    if (isInFieldOfView(bird, other)) {\n      const dx = bird.x - other.x;\n      const dy = bird.y - other.y;\n      const distance = Math.sqrt(dx * dx + dy * dy);\n      if (distance > 0 && distance < boidParams.value.separationDistance) {\n        const force = (boidParams.value.separationDistance - distance) / distance;\n        fx += dx * force;\n        fy += dy * force;\n        count++;\n      }\n    }\n  });\n  if (count > 0) {\n    fx /= count;\n    fy /= count;\n  }\n  return { x: fx * boidParams.value.separationWeight, y: fy * boidParams.value.separationWeight };\n};\n\n// 整列力を計算（視野角を考慮）\nexport const calculateAlignment = (bird: Bird, neighbors: Bird[]): Vector => {\n  let vx = 0, vy = 0, count = 0;\n  neighbors.forEach(other => {\n    if (isInFieldOfView(bird, other)) {\n      const distance = Math.sqrt((bird.x - other.x) ** 2 + (bird.y - other.y) ** 2);\n      if (distance < boidParams.value.alignmentDistance) {\n        vx += other.vx;\n        vy += other.vy;\n        count++;\n      }\n    }\n  });\n  if (count > 0) {\n    vx = (vx / count - bird.vx) * boidParams.value.alignmentWeight;\n    vy = (vy / count - bird.vy) * boidParams.value.alignmentWeight;\n    if (vx === 0 && vy === 0) {\n      vx = (Math.random() * 2 - 1) * 0.1;\n      vy = (Math.random() * 2 - 1) * 0.1;\n    }\n  }\n  return { x: vx, y: vy };\n};\n\n// 結合力を計算（視野角を考慮）\nexport const calculateCohesion = (bird: Bird, neighbors: Bird[]): Vector => {\n  let cx = 0, cy = 0, count = 0;\n  neighbors.forEach(other => {\n    if (isInFieldOfView(bird, other)) {\n      const distance = Math.sqrt((bird.x - other.x) ** 2 + (bird.y - other.y) ** 2);\n      if (distance < boidParams.value.cohesionDistance) {\n        cx += other.x;\n        cy += other.y;\n        count++;\n      }\n    }\n  });\n  if (count > 0) {\n    cx = cx / count - bird.x;\n    cy = cy / count - bird.y;\n    const distance = Math.sqrt(cx * cx + cy * cy);\n    cx = (cx / distance) * boidParams.value.cohesionWeight;\n    cy = (cy / distance) * boidParams.value.cohesionWeight;\n  }\n  return { x: cx, y: cy };\n};\n\nexport const initializeBirds = (\n  numberOfBirds: number = 100, width: number = 800, height: number = 600): Bird[] => {\n  const birds: Bird[] = [];\n  for (let i = 0; i < numberOfBirds; i++) {\n    birds.push({\n      x: Math.random() * (width - 10) + 5,\n      y: Math.random() * (height - 10) + 5,\n      vx: Math.random() * 2 - 1,\n      vy: Math.random() * 2 - 1,\n      angle: Math.random() * 2 * Math.PI, // 鳥の向きを追加\n    });\n  }\n  return birds;\n};\n\nexport const updateMouseBird = (mouseBird: Bird, mousePosition: Vector): void => {\n  const dx = mousePosition.x - mouseBird.x;\n  const dy = mousePosition.y - mouseBird.y;\n  const distance = Math.sqrt(dx * dx + dy * dy);\n\n  if (distance > 1) {\n    mouseBird.vx = (dx / distance) * 2.0;\n    mouseBird.vy = (dy / distance) * 2.0;\n    mouseBird.x += mouseBird.vx;\n    mouseBird.y += mouseBird.vy;\n    mouseBird.angle = Math.atan2(mouseBird.vy, mouseBird.vx);\n  }\n}\n","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, normalizeClass as _normalizeClass, unref as _unref, normalizeStyle as _normalizeStyle, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createBlock as _createBlock } from \"vue\"\n\nconst _hoisted_1 = [\"width\", \"height\"]\nconst _hoisted_2 = { class: \"q-gutter-md q-mt-md\" }\nconst _hoisted_3 = { class: \"bg-dark q-mt-md rounded-borders\" }\nconst _hoisted_4 = { class: \"q-gutter-md q-ma-md\" }\nconst _hoisted_5 = { class: \"col\" }\nconst _hoisted_6 = { class: \"row items-center\" }\nconst _hoisted_7 = { class: \"q-mr-md\" }\nconst _hoisted_8 = { class: \"q-mr-md\" }\nconst _hoisted_9 = { class: \"q-mr-md\" }\nconst _hoisted_10 = { class: \"q-mr-md\" }\nconst _hoisted_11 = { class: \"column bg-dark rounded-borders q-pt-none q-pb-md q-pl-md q-pr-md q-mx-lg q-gutter-md q-mt-md\" }\nconst _hoisted_12 = { class: \"row col\" }\nconst _hoisted_13 = { class: \"q-mr-md\" }\nconst _hoisted_14 = { class: \"column bg-dark rounded-borders q-pt-md q-pb-lg q-pl-lg q-pr-lg q-mt-md q-mx-lg\" }\nconst _hoisted_15 = { class: \"row col items-center q-gutter-xl\" }\nconst _hoisted_16 = { class: \"row items-center\" }\nconst _hoisted_17 = { class: \"q-mr-md\" }\nconst _hoisted_18 = { class: \"q-mt-lg q-pa-xl q-gutter-y-md\" }\nconst _hoisted_19 = { class: \"row justify-center q-gutter-lg q-mt-md q-mb-xl\" }\n\nimport { ref, onMounted, onUnmounted, watch } from 'vue';\nimport {\n  boidParams,\n  limitVector,\n  calculateSeparation,\n  calculateAlignment,\n  calculateCohesion,\n  initializeBirds,\n  updateMouseBird,\n} from '@/module/boid';\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'BoidAlgorithm',\n  setup(__props) {\n\nconst canvas = ref(null);\nlet width = Math.min(800, window.innerWidth * 0.9);\nlet height = Math.min(600, window.innerHeight * 0.6);\nconst birds = ref([]);\nlet animationId = null;\nconst useMouseBird = ref(false);\n\nconst mousePosition = ref({ x: width / 2, y: height / 2 });\n\n// ユーザのマウスに追従する鳥\nconst mouseBird = ref({\n  x: width / 2,\n  y: height / 2,\n  vx: 0,\n  vy: 0,\n  angle: 0,\n});\n\nconst handleMouseMove = (event) => {\n  const rect = canvas.value.getBoundingClientRect();\n  mousePosition.value.x = Math.max(0, Math.min(event.clientX - rect.left, rect.width));\n  mousePosition.value.y = Math.max(0, Math.min(event.clientY - rect.top, rect.height));\n};\n\nconst handleTouchMove = (event) => {\n  event.preventDefault(); // スクロール防止\n  if (event.touches.length > 0) {\n    const rect = canvas.value.getBoundingClientRect();\n    const touchX = event.touches[0].clientX - rect.left;\n    const touchY = event.touches[0].clientY - rect.top;\n\n    // キャンバス内に制限\n    mousePosition.value.x = Math.max(0, Math.min(touchX, rect.width));\n    mousePosition.value.y = Math.max(0, Math.min(touchY, rect.height));\n  }\n};\n\nconst displaySettings = ref({\n  body: { label: '鳥の体', value: true },\n  fieldOfView: { label: '視野角', value: true },\n  separationRadius: { label: '分離半径', value: true },\n  alignmentRadius: { label: '整列半径', value: true },\n  cohesionRadius: { label: '結合半径', value: true },\n});\n\n// 個体数の初期値とref\nconst numberOfBirds = ref(20);\n\n// スライダーの設定を配列で管理\nconst sliders = ref([\n  {\n    label: '分離半径',\n    value: 20,\n    min: 10,\n    max: 100,\n    step: 1,\n    key: 'separationDistance',\n  },\n  {\n    label: '整列半径',\n    value: 50,\n    min: 10,\n    max: 200,\n    step: 1,\n    key: 'alignmentDistance',\n  },\n  {\n    label: '結合半径',\n    value: 100,\n    min: 10,\n    max: 300,\n    step: 1,\n    key: 'cohesionDistance',\n  },\n  {\n    label: '分離重み',\n    value: 1.0,\n    min: 0,\n    max: 5,\n    step: 0.1,\n    key: 'separationWeight',\n  },\n  {\n    label: '整列重み',\n    value: 1.0,\n    min: 0,\n    max: 5,\n    step: 0.1,\n    key: 'alignmentWeight',\n  },\n  {\n    label: '結合重み',\n    value: 1.0,\n    min: 0,\n    max: 5,\n    step: 0.1,\n    key: 'cohesionWeight',\n  },\n  {\n    label: '最大速度',\n    value: 2.0,\n    min: 1.5,\n    max: 5,\n    step: 0.1,\n    key: 'maxSpeed',\n  },\n  {\n    label: '視野角',\n    value: 90,\n    min: 0,\n    max: 360,\n    step: 1,\n    key: 'fieldOfView',\n  },\n]);\n\n// スライダーの値を更新するウォッチャー\nwatch(\n  sliders,\n  (newVal) => {\n    newVal.forEach((slider) => {\n      boidParams.value[slider.key] = slider.value;\n    });\n  },\n  { deep: true }\n);\n\n// メインの更新処理\nconst updateBirds = () => {\n  birds.value.forEach((bird) => {\n    // const neighbors = birds.value.filter(other => other !== bird)\n    const neighbors = [...birds.value, mouseBird.value].filter(\n      (other) => other !== bird\n    );\n\n    const separation = calculateSeparation(bird, neighbors);\n    const alignment = calculateAlignment(bird, neighbors);\n    const cohesion = calculateCohesion(bird, neighbors);\n\n    bird.vx += separation.x + alignment.x + cohesion.x;\n    bird.vy += separation.y + alignment.y + cohesion.y;\n\n    const limitedVelocity = limitVector(\n      bird.vx,\n      bird.vy,\n      boidParams.value.maxSpeed\n    );\n    bird.vx = limitedVelocity.x;\n    bird.vy = limitedVelocity.y;\n\n    bird.x += bird.vx / 2;\n    bird.y += bird.vy / 2;\n\n    // 鳥の角度を更新\n    bird.angle = Math.atan2(bird.vy, bird.vx);\n\n    bird.x = (bird.x + width) % width;\n    bird.y = (bird.y + height) % height;\n  });\n  if (useMouseBird.value) {\n    updateMouseBird(mouseBird.value, mousePosition.value); // モジュール化された関数を使用\n  }\n};\n\nconst drawMouseBird = () => {\n  const ctx = canvas.value.getContext('2d');\n  ctx.fillStyle = 'red';\n  ctx.beginPath();\n  ctx.arc(mouseBird.value.x, mouseBird.value.y, 10, 0, 2 * Math.PI);\n  ctx.fill();\n};\n\n// 鳥の描画\nconst drawBird = (bird) => {\n  const ctx = canvas.value.getContext('2d');\n  const size = 10;\n\n  // 鳥の体を描画\n  if (displaySettings.value.body.value) {\n    ctx.fillStyle = 'orange';\n    ctx.beginPath();\n    ctx.moveTo(\n      bird.x + Math.cos(bird.angle) * size,\n      bird.y + Math.sin(bird.angle) * size\n    );\n    ctx.lineTo(\n      bird.x + Math.cos(bird.angle + (Math.PI * 2.5) / 3) * size,\n      bird.y + Math.sin(bird.angle + (Math.PI * 2.5) / 3) * size\n    );\n    ctx.lineTo(\n      bird.x + Math.cos(bird.angle - (Math.PI * 2.5) / 3) * size,\n      bird.y + Math.sin(bird.angle - (Math.PI * 2.5) / 3) * size\n    );\n    ctx.closePath();\n    ctx.fill();\n  }\n\n  // 視野角を描画\n  if (displaySettings.value.fieldOfView.value) {\n    ctx.strokeStyle = 'rgba(255, 255, 255, 0.3)';\n    ctx.beginPath();\n    ctx.moveTo(bird.x, bird.y);\n    ctx.arc(\n      bird.x,\n      bird.y,\n      size * 3,\n      bird.angle - (boidParams.value.fieldOfView / 2) * (Math.PI / 180),\n      bird.angle + (boidParams.value.fieldOfView / 2) * (Math.PI / 180)\n    );\n    ctx.closePath();\n    ctx.stroke();\n  }\n\n  // 分離半径を描画\n  if (displaySettings.value.separationRadius.value) {\n    ctx.strokeStyle = 'rgba(255, 100, 100, 0.2)';\n    ctx.beginPath();\n    ctx.arc(\n      bird.x,\n      bird.y,\n      boidParams.value.separationDistance,\n      0,\n      2 * Math.PI\n    );\n    ctx.stroke();\n  }\n  // 整列半径を描画\n  if (displaySettings.value.alignmentRadius.value) {\n    ctx.strokeStyle = 'rgba(100, 255, 100, 0.2)';\n    ctx.beginPath();\n    ctx.arc(\n      bird.x,\n      bird.y,\n      boidParams.value.alignmentDistance,\n      0,\n      2 * Math.PI\n    );\n    ctx.stroke();\n  }\n  // 結合半径を描画\n  if (displaySettings.value.cohesionRadius.value) {\n    ctx.strokeStyle = 'rgba(100, 100, 255, 0.2)';\n    ctx.beginPath();\n    ctx.arc(\n      bird.x,\n      bird.y,\n      boidParams.value.cohesionDistance,\n      0,\n      2 * Math.PI\n    );\n    ctx.stroke();\n  }\n};\n\n// 群れの描画\nconst drawBirds = () => {\n  const ctx = canvas.value.getContext('2d');\n\n  // キャンバスを毎回クリア\n  ctx.clearRect(0, 0, width, height);\n\n  // 鳥を描画\n  birds.value.forEach((bird) => {\n    drawBird(bird); // 鳥ごとに描画\n  });\n  if (useMouseBird.value) {\n    drawMouseBird();\n  }\n};\n\n// アニメーション\nconst animate = () => {\n  updateBirds();\n  drawBirds();\n  animationId = requestAnimationFrame(animate);\n};\n\n// アニメーションの開始と停止\nconst startAnimation = () => {\n  if (!animationId) {\n    animate();\n  }\n};\n\nconst stopAnimation = () => {\n  if (animationId) {\n    cancelAnimationFrame(animationId);\n    animationId = null;\n  }\n};\n\nconst handleResize = () => {\n  width = Math.min(800, window.innerWidth * 0.9);\n  height = Math.min(600, window.innerHeight * 0.6);\n};\n\n// 個体数が変更されたときに鳥を再初期化するウォッチャー\nwatch(numberOfBirds, () => {\n  birds.value = initializeBirds(numberOfBirds.value, width, height); // モジュール化された関数を使用\n});\n\n// ライフサイクルメソッド\nonMounted(() => {\n  birds.value = initializeBirds(numberOfBirds.value, width, height); // モジュール化された関数を使用\n  startAnimation();\n  canvas.value.addEventListener('mousemove', handleMouseMove);\n  canvas.value.addEventListener('touchmove', handleTouchMove, {\n    passive: false,\n  });\n  window.addEventListener('resize', handleResize);\n});\n\nonUnmounted(() => {\n  stopAnimation();\n  canvas.value.removeEventListener('mousemove', handleMouseMove);\n  canvas.value.removeEventListener('touchmove', handleTouchMove);\n  window.removeEventListener('resize', handleResize);\n});\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_q_btn = _resolveComponent(\"q-btn\")!\n  const _component_q_toggle = _resolveComponent(\"q-toggle\")!\n  const _component_q_slider = _resolveComponent(\"q-slider\")!\n  const _component_q_page = _resolveComponent(\"q-page\")!\n\n  return (_openBlock(), _createBlock(_component_q_page, { class: \"flex flex-center column\" }, {\n    default: _withCtx(() => [\n      _createElementVNode(\"div\", {\n        class: _normalizeClass([\"q-mb-lg\", [\n      _ctx.$q.screen.xs ? 'text-h4 q-mt-md' :\n      _ctx.$q.screen.sm ? 'text-h3' :\n      'text-h2'\n    ]])\n      }, _cache[2] || (_cache[2] = [\n        _createElementVNode(\"span\", null, \"Boid Algorithm\", -1)\n      ]), 2),\n      _createElementVNode(\"div\", null, [\n        _createElementVNode(\"div\", {\n          class: \"border\",\n          style: _normalizeStyle({ width: `${_unref(width)+25}px`, height: `${_unref(height)+25}px` })\n        }, [\n          _createElementVNode(\"canvas\", {\n            class: \"q-ma-sm\",\n            ref_key: \"canvas\",\n            ref: canvas,\n            width: _unref(width),\n            height: _unref(height)\n          }, null, 8, _hoisted_1)\n        ], 4)\n      ]),\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createVNode(_component_q_btn, {\n          outline: \"\",\n          onClick: startAnimation\n        }, {\n          default: _withCtx(() => _cache[3] || (_cache[3] = [\n            _createTextVNode(\"アニメーション開始\")\n          ])),\n          _: 1\n        }),\n        _createVNode(_component_q_btn, {\n          outline: \"\",\n          onClick: stopAnimation\n        }, {\n          default: _withCtx(() => _cache[4] || (_cache[4] = [\n            _createTextVNode(\"アニメーション停止\")\n          ])),\n          _: 1\n        })\n      ]),\n      _createElementVNode(\"div\", _hoisted_3, [\n        _createElementVNode(\"div\", _hoisted_4, [\n          _createElementVNode(\"div\", _hoisted_5, [\n            _createVNode(_component_q_toggle, {\n              modelValue: useMouseBird.value,\n              \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((useMouseBird).value = $event)),\n              \"label-color\": \"grey-8\",\n              \"label-text-color\": \"white\",\n              label: \"追従鳥の利用：\",\n              \"left-label\": true\n            }, null, 8, [\"modelValue\"])\n          ]),\n          _createElementVNode(\"div\", _hoisted_6, [\n            _createElementVNode(\"span\", _hoisted_7, \"x: \" + _toDisplayString(mouseBird.value.x.toFixed(2)), 1),\n            _createElementVNode(\"span\", _hoisted_8, \"y: \" + _toDisplayString(mouseBird.value.y.toFixed(2)), 1),\n            _createElementVNode(\"span\", _hoisted_9, \"vx: \" + _toDisplayString(mouseBird.value.vx.toFixed(2)), 1),\n            _createElementVNode(\"span\", _hoisted_10, \"vy: \" + _toDisplayString(mouseBird.value.vy.toFixed(2)), 1)\n          ])\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_11, [\n        _cache[5] || (_cache[5] = _createElementVNode(\"div\", { class: \"col\" }, \"表示設定\", -1)),\n        _createElementVNode(\"div\", _hoisted_12, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(displaySettings.value, (setting, key) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n              key: key,\n              class: \"row items-center\"\n            }, [\n              _createVNode(_component_q_toggle, {\n                modelValue: displaySettings.value[key].value,\n                \"onUpdate:modelValue\": ($event: any) => ((displaySettings.value[key].value) = $event),\n                \"label-color\": \"grey-8\",\n                \"label-text-color\": \"white\"\n              }, null, 8, [\"modelValue\", \"onUpdate:modelValue\"]),\n              _createElementVNode(\"span\", _hoisted_13, _toDisplayString(displaySettings.value[key].label), 1)\n            ]))\n          }), 128))\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_14, [\n        _cache[7] || (_cache[7] = _createElementVNode(\"div\", { class: \"col\" }, \"パラメータ設定\", -1)),\n        _createElementVNode(\"div\", _hoisted_15, [\n          _createElementVNode(\"div\", _hoisted_16, [\n            _cache[6] || (_cache[6] = _createElementVNode(\"span\", { class: \"q-mr-md\" }, \"個体数\", -1)),\n            _createVNode(_component_q_slider, {\n              modelValue: numberOfBirds.value,\n              \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((numberOfBirds).value = $event)),\n              \"label-always\": \"\",\n              \"label-color\": \"grey-8\",\n              \"label-text-color\": \"white\",\n              \"switch-marker-labels-side\": \"\",\n              \"switch-label-side\": \"\",\n              markers: \"\",\n              min: 10,\n              max: 100,\n              step: 1\n            }, null, 8, [\"modelValue\"])\n          ]),\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(sliders.value, (slider, index) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n              key: index,\n              class: \"row items-center\"\n            }, [\n              _createElementVNode(\"span\", _hoisted_17, _toDisplayString(slider.label), 1),\n              _createVNode(_component_q_slider, {\n                modelValue: slider.value,\n                \"onUpdate:modelValue\": ($event: any) => ((slider.value) = $event),\n                \"label-always\": \"\",\n                \"label-color\": \"grey-8\",\n                \"label-text-color\": \"white\",\n                \"switch-marker-labels-side\": \"\",\n                \"switch-label-side\": \"\",\n                markers: \"\",\n                min: slider.min,\n                max: slider.max,\n                step: slider.step\n              }, null, 8, [\"modelValue\", \"onUpdate:modelValue\", \"min\", \"max\", \"step\"])\n            ]))\n          }), 128))\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_18, [\n        _createElementVNode(\"p\", {\n          class: _normalizeClass([\"text-h3 text-center\", [\n          _ctx.$q.screen.xs ? 'text-h4' :\n          _ctx.$q.screen.sm ? 'text-h3' :\n          'text-h2'\n        ]])\n        }, \" Boid Algorithmとは \", 2),\n        _cache[11] || (_cache[11] = _createElementVNode(\"div\", { class: \"text-body1 text-center\" }, \" このBoidアルゴリズムは，鳥の群れの挙動をシミュレートします．各鳥（Boid）は以下の3つのルールに従って行動します． \", -1)),\n        _createElementVNode(\"div\", _hoisted_19, [\n          _createElementVNode(\"div\", {\n            class: _normalizeClass([\"bg-grey-2 q-pa-md rounded-borders text-black\", [\n          _ctx.$q.screen.xs ? 'col-9' :\n          _ctx.$q.screen.sm ? 'col-5' :\n          'col-3'\n        ]])\n          }, _cache[8] || (_cache[8] = [\n            _createElementVNode(\"p\", { class: \"text-subtitle1 text-center\" }, [\n              _createElementVNode(\"strong\", null, \"分離 (Separation)\")\n            ], -1),\n            _createElementVNode(\"p\", { class: \"text-body1 text-center\" }, \" 近くの他の鳥との半径が一定以下にならないように，衝突を避けるように方向を変えます． \", -1)\n          ]), 2),\n          _createElementVNode(\"div\", {\n            class: _normalizeClass([\"bg-grey-2 q-pa-md rounded-borders text-black\", [\n                  _ctx.$q.screen.xs ? 'col-9' :\n                  _ctx.$q.screen.sm ? 'col-5' :\n                  'col-3']])\n          }, _cache[9] || (_cache[9] = [\n            _createElementVNode(\"p\", { class: \"text-subtitle1 text-center\" }, [\n              _createElementVNode(\"strong\", null, \"整列 (Alignment)\")\n            ], -1),\n            _createElementVNode(\"p\", { class: \"text-body1 text-center\" }, \" 近くの他の鳥の平均的な速度と方向へ向かうように方向を変えます． \", -1)\n          ]), 2),\n          _createElementVNode(\"div\", {\n            class: _normalizeClass([\"bg-grey-2 q-pa-md rounded-borders text-black\", [\n                  _ctx.$q.screen.xs ? 'col-9' :\n                  _ctx.$q.screen.sm ? 'col-5' :\n                  'col-3']])\n          }, _cache[10] || (_cache[10] = [\n            _createElementVNode(\"p\", { class: \"text-subtitle1 text-center\" }, [\n              _createElementVNode(\"strong\", null, \"結合 (Cohesion)\")\n            ], -1),\n            _createElementVNode(\"p\", { class: \"text-body1 text-center\" }, \" 近くの他の鳥の平均位置へ向かうように方向を変えます． \", -1)\n          ]), 2)\n        ]),\n        _cache[12] || (_cache[12] = _createElementVNode(\"div\", { class: \"text-body1 text-center\" }, \" これらのルールを各鳥に適用することで，群れ全体としてまとまりのある，自然な動きが生まれます．各ルールの影響度や，近傍とみなす半径は，スライダーで調整可能です． \", -1)),\n        _cache[13] || (_cache[13] = _createElementVNode(\"div\", { class: \"text-body1 text-center\" }, \" この実装では，画面の端に達した鳥は反対側から出現するようにしています． \", -1))\n      ])\n    ]),\n    _: 1\n  }))\n}\n}\n\n})","<template>\n  <q-page class=\"flex flex-center column\">\n    <div class=\"q-mb-lg\" :class=\"[\n      $q.screen.xs ? 'text-h4 q-mt-md' :\n      $q.screen.sm ? 'text-h3' :\n      'text-h2'\n    ]\">\n      <span>Boid Algorithm</span>\n    </div>\n    <div>\n      <div class=\"border\" :style=\"{ width: `${width+25}px`, height: `${height+25}px` }\">\n        <canvas class=\"q-ma-sm\" ref=\"canvas\" :width=\"width\" :height=\"height\"></canvas>\n      </div>\n    </div>\n\n    <div class=\"q-gutter-md q-mt-md\">\n      <q-btn outline @click=\"startAnimation\">アニメーション開始</q-btn>\n      <q-btn outline @click=\"stopAnimation\">アニメーション停止</q-btn>\n    </div>\n    <div class=\"bg-dark q-mt-md rounded-borders\">\n      <div class=\"q-gutter-md q-ma-md\">\n        <div class=\"col\">\n          <q-toggle v-model=\"useMouseBird\"\n            label-color=\"grey-8\"\n            label-text-color=\"white\"\n            label=\"追従鳥の利用：\"\n            :left-label=\"true\" />\n        </div>\n        <div class=\"row items-center\">\n          <span class=\"q-mr-md\">x: {{ mouseBird.x.toFixed(2) }}</span>\n          <span class=\"q-mr-md\">y: {{ mouseBird.y.toFixed(2) }}</span>\n          <span class=\"q-mr-md\">vx: {{ mouseBird.vx.toFixed(2) }}</span>\n          <span class=\"q-mr-md\">vy: {{ mouseBird.vy.toFixed(2) }}</span>\n        </div>\n      </div>\n    </div>\n    <div class=\"column bg-dark rounded-borders q-pt-none q-pb-md q-pl-md q-pr-md q-mx-lg q-gutter-md q-mt-md\">\n      <div class=\"col\">表示設定</div>\n      <div class=\"row col\">\n        <div v-for=\"(setting, key) in displaySettings\" :key=\"key\" class=\"row items-center\">\n          <q-toggle v-model=\"displaySettings[key].value\" label-color=\"grey-8\" label-text-color=\"white\" />\n          <span class=\"q-mr-md\">{{ displaySettings[key].label }}</span>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"column bg-dark rounded-borders q-pt-md q-pb-lg q-pl-lg q-pr-lg q-mt-md q-mx-lg\">\n      <div class=\"col\">パラメータ設定</div>\n      <div class=\"row col items-center q-gutter-xl\">\n        <div class=\"row items-center\">\n          <span class=\"q-mr-md\">個体数</span>\n          <q-slider\n            v-model=\"numberOfBirds\"\n            label-always\n            label-color=\"grey-8\"\n            label-text-color=\"white\"\n            switch-marker-labels-side\n            switch-label-side\n            markers\n            :min=\"10\"\n            :max=\"100\"\n            :step=\"1\"\n          />\n        </div>\n        <div v-for=\"(slider, index) in sliders\" :key=\"index\" class=\"row items-center\">\n          <span class=\"q-mr-md\">{{ slider.label }}</span>\n          <q-slider\n            v-model=\"slider.value\"\n            label-always\n            label-color=\"grey-8\"\n            label-text-color=\"white\"\n            switch-marker-labels-side\n            switch-label-side\n            markers\n            :min=\"slider.min\"\n            :max=\"slider.max\"\n            :step=\"slider.step\"\n          />\n        </div>\n      </div>\n    </div>\n\n    <div class=\"q-mt-lg q-pa-xl q-gutter-y-md\">\n      <p class=\"text-h3 text-center\"\n        :class=\"[\n          $q.screen.xs ? 'text-h4' :\n          $q.screen.sm ? 'text-h3' :\n          'text-h2'\n        ]\">\n        Boid Algorithmとは\n      </p>\n      <div class=\"text-body1 text-center\">\n        このBoidアルゴリズムは，鳥の群れの挙動をシミュレートします．各鳥（Boid）は以下の3つのルールに従って行動します．\n      </div>\n      <div class=\"row justify-center q-gutter-lg q-mt-md q-mb-xl\">\n        <div class=\"bg-grey-2 q-pa-md rounded-borders text-black\"\n            :class=\"[\n          $q.screen.xs ? 'col-9' :\n          $q.screen.sm ? 'col-5' :\n          'col-3'\n        ]\">\n             <p class=\"text-subtitle1 text-center\">\n               <strong>分離 (Separation)</strong>\n             </p>\n             <p class=\"text-body1 text-center\">\n               近くの他の鳥との半径が一定以下にならないように，衝突を避けるように方向を変えます．\n             </p>\n           </div>\n           <div class=\"bg-grey-2 q-pa-md rounded-borders text-black\"\n                :class=\"[\n                  $q.screen.xs ? 'col-9' :\n                  $q.screen.sm ? 'col-5' :\n                  'col-3']\">\n             <p class=\"text-subtitle1 text-center\">\n               <strong>整列 (Alignment)</strong>\n             </p>\n             <p class=\"text-body1 text-center\">\n               近くの他の鳥の平均的な速度と方向へ向かうように方向を変えます．\n             </p>\n           </div>\n           <div class=\"bg-grey-2 q-pa-md rounded-borders text-black\"\n                :class=\"[\n                  $q.screen.xs ? 'col-9' :\n                  $q.screen.sm ? 'col-5' :\n                  'col-3']\">\n          <p class=\"text-subtitle1 text-center\">\n            <strong>結合 (Cohesion)</strong>\n          </p>\n          <p class=\"text-body1 text-center\">\n            近くの他の鳥の平均位置へ向かうように方向を変えます．\n          </p>\n        </div>\n      </div>\n      <div class=\"text-body1 text-center\">\n        これらのルールを各鳥に適用することで，群れ全体としてまとまりのある，自然な動きが生まれます．各ルールの影響度や，近傍とみなす半径は，スライダーで調整可能です．\n      </div>\n      <div class=\"text-body1 text-center\">\n        この実装では，画面の端に達した鳥は反対側から出現するようにしています．\n      </div>\n    </div>\n  </q-page>\n</template>\n\n\n// Boidコンポーネント\n<script setup lang=\"ts\">\nimport { ref, onMounted, onUnmounted, watch } from 'vue';\nimport {\n  boidParams,\n  limitVector,\n  calculateSeparation,\n  calculateAlignment,\n  calculateCohesion,\n  initializeBirds,\n  updateMouseBird,\n} from '@/module/boid';\n\nconst canvas = ref(null);\nlet width = Math.min(800, window.innerWidth * 0.9);\nlet height = Math.min(600, window.innerHeight * 0.6);\nconst birds = ref([]);\nlet animationId = null;\nconst useMouseBird = ref(false);\n\nconst mousePosition = ref({ x: width / 2, y: height / 2 });\n\n// ユーザのマウスに追従する鳥\nconst mouseBird = ref({\n  x: width / 2,\n  y: height / 2,\n  vx: 0,\n  vy: 0,\n  angle: 0,\n});\n\nconst handleMouseMove = (event) => {\n  const rect = canvas.value.getBoundingClientRect();\n  mousePosition.value.x = Math.max(0, Math.min(event.clientX - rect.left, rect.width));\n  mousePosition.value.y = Math.max(0, Math.min(event.clientY - rect.top, rect.height));\n};\n\nconst handleTouchMove = (event) => {\n  event.preventDefault(); // スクロール防止\n  if (event.touches.length > 0) {\n    const rect = canvas.value.getBoundingClientRect();\n    const touchX = event.touches[0].clientX - rect.left;\n    const touchY = event.touches[0].clientY - rect.top;\n\n    // キャンバス内に制限\n    mousePosition.value.x = Math.max(0, Math.min(touchX, rect.width));\n    mousePosition.value.y = Math.max(0, Math.min(touchY, rect.height));\n  }\n};\n\nconst displaySettings = ref({\n  body: { label: '鳥の体', value: true },\n  fieldOfView: { label: '視野角', value: true },\n  separationRadius: { label: '分離半径', value: true },\n  alignmentRadius: { label: '整列半径', value: true },\n  cohesionRadius: { label: '結合半径', value: true },\n});\n\n// 個体数の初期値とref\nconst numberOfBirds = ref(20);\n\n// スライダーの設定を配列で管理\nconst sliders = ref([\n  {\n    label: '分離半径',\n    value: 20,\n    min: 10,\n    max: 100,\n    step: 1,\n    key: 'separationDistance',\n  },\n  {\n    label: '整列半径',\n    value: 50,\n    min: 10,\n    max: 200,\n    step: 1,\n    key: 'alignmentDistance',\n  },\n  {\n    label: '結合半径',\n    value: 100,\n    min: 10,\n    max: 300,\n    step: 1,\n    key: 'cohesionDistance',\n  },\n  {\n    label: '分離重み',\n    value: 1.0,\n    min: 0,\n    max: 5,\n    step: 0.1,\n    key: 'separationWeight',\n  },\n  {\n    label: '整列重み',\n    value: 1.0,\n    min: 0,\n    max: 5,\n    step: 0.1,\n    key: 'alignmentWeight',\n  },\n  {\n    label: '結合重み',\n    value: 1.0,\n    min: 0,\n    max: 5,\n    step: 0.1,\n    key: 'cohesionWeight',\n  },\n  {\n    label: '最大速度',\n    value: 2.0,\n    min: 1.5,\n    max: 5,\n    step: 0.1,\n    key: 'maxSpeed',\n  },\n  {\n    label: '視野角',\n    value: 90,\n    min: 0,\n    max: 360,\n    step: 1,\n    key: 'fieldOfView',\n  },\n]);\n\n// スライダーの値を更新するウォッチャー\nwatch(\n  sliders,\n  (newVal) => {\n    newVal.forEach((slider) => {\n      boidParams.value[slider.key] = slider.value;\n    });\n  },\n  { deep: true }\n);\n\n// メインの更新処理\nconst updateBirds = () => {\n  birds.value.forEach((bird) => {\n    // const neighbors = birds.value.filter(other => other !== bird)\n    const neighbors = [...birds.value, mouseBird.value].filter(\n      (other) => other !== bird\n    );\n\n    const separation = calculateSeparation(bird, neighbors);\n    const alignment = calculateAlignment(bird, neighbors);\n    const cohesion = calculateCohesion(bird, neighbors);\n\n    bird.vx += separation.x + alignment.x + cohesion.x;\n    bird.vy += separation.y + alignment.y + cohesion.y;\n\n    const limitedVelocity = limitVector(\n      bird.vx,\n      bird.vy,\n      boidParams.value.maxSpeed\n    );\n    bird.vx = limitedVelocity.x;\n    bird.vy = limitedVelocity.y;\n\n    bird.x += bird.vx / 2;\n    bird.y += bird.vy / 2;\n\n    // 鳥の角度を更新\n    bird.angle = Math.atan2(bird.vy, bird.vx);\n\n    bird.x = (bird.x + width) % width;\n    bird.y = (bird.y + height) % height;\n  });\n  if (useMouseBird.value) {\n    updateMouseBird(mouseBird.value, mousePosition.value); // モジュール化された関数を使用\n  }\n};\n\nconst drawMouseBird = () => {\n  const ctx = canvas.value.getContext('2d');\n  ctx.fillStyle = 'red';\n  ctx.beginPath();\n  ctx.arc(mouseBird.value.x, mouseBird.value.y, 10, 0, 2 * Math.PI);\n  ctx.fill();\n};\n\n// 鳥の描画\nconst drawBird = (bird) => {\n  const ctx = canvas.value.getContext('2d');\n  const size = 10;\n\n  // 鳥の体を描画\n  if (displaySettings.value.body.value) {\n    ctx.fillStyle = 'orange';\n    ctx.beginPath();\n    ctx.moveTo(\n      bird.x + Math.cos(bird.angle) * size,\n      bird.y + Math.sin(bird.angle) * size\n    );\n    ctx.lineTo(\n      bird.x + Math.cos(bird.angle + (Math.PI * 2.5) / 3) * size,\n      bird.y + Math.sin(bird.angle + (Math.PI * 2.5) / 3) * size\n    );\n    ctx.lineTo(\n      bird.x + Math.cos(bird.angle - (Math.PI * 2.5) / 3) * size,\n      bird.y + Math.sin(bird.angle - (Math.PI * 2.5) / 3) * size\n    );\n    ctx.closePath();\n    ctx.fill();\n  }\n\n  // 視野角を描画\n  if (displaySettings.value.fieldOfView.value) {\n    ctx.strokeStyle = 'rgba(255, 255, 255, 0.3)';\n    ctx.beginPath();\n    ctx.moveTo(bird.x, bird.y);\n    ctx.arc(\n      bird.x,\n      bird.y,\n      size * 3,\n      bird.angle - (boidParams.value.fieldOfView / 2) * (Math.PI / 180),\n      bird.angle + (boidParams.value.fieldOfView / 2) * (Math.PI / 180)\n    );\n    ctx.closePath();\n    ctx.stroke();\n  }\n\n  // 分離半径を描画\n  if (displaySettings.value.separationRadius.value) {\n    ctx.strokeStyle = 'rgba(255, 100, 100, 0.2)';\n    ctx.beginPath();\n    ctx.arc(\n      bird.x,\n      bird.y,\n      boidParams.value.separationDistance,\n      0,\n      2 * Math.PI\n    );\n    ctx.stroke();\n  }\n  // 整列半径を描画\n  if (displaySettings.value.alignmentRadius.value) {\n    ctx.strokeStyle = 'rgba(100, 255, 100, 0.2)';\n    ctx.beginPath();\n    ctx.arc(\n      bird.x,\n      bird.y,\n      boidParams.value.alignmentDistance,\n      0,\n      2 * Math.PI\n    );\n    ctx.stroke();\n  }\n  // 結合半径を描画\n  if (displaySettings.value.cohesionRadius.value) {\n    ctx.strokeStyle = 'rgba(100, 100, 255, 0.2)';\n    ctx.beginPath();\n    ctx.arc(\n      bird.x,\n      bird.y,\n      boidParams.value.cohesionDistance,\n      0,\n      2 * Math.PI\n    );\n    ctx.stroke();\n  }\n};\n\n// 群れの描画\nconst drawBirds = () => {\n  const ctx = canvas.value.getContext('2d');\n\n  // キャンバスを毎回クリア\n  ctx.clearRect(0, 0, width, height);\n\n  // 鳥を描画\n  birds.value.forEach((bird) => {\n    drawBird(bird); // 鳥ごとに描画\n  });\n  if (useMouseBird.value) {\n    drawMouseBird();\n  }\n};\n\n// アニメーション\nconst animate = () => {\n  updateBirds();\n  drawBirds();\n  animationId = requestAnimationFrame(animate);\n};\n\n// アニメーションの開始と停止\nconst startAnimation = () => {\n  if (!animationId) {\n    animate();\n  }\n};\n\nconst stopAnimation = () => {\n  if (animationId) {\n    cancelAnimationFrame(animationId);\n    animationId = null;\n  }\n};\n\nconst handleResize = () => {\n  width = Math.min(800, window.innerWidth * 0.9);\n  height = Math.min(600, window.innerHeight * 0.6);\n};\n\n// 個体数が変更されたときに鳥を再初期化するウォッチャー\nwatch(numberOfBirds, () => {\n  birds.value = initializeBirds(numberOfBirds.value, width, height); // モジュール化された関数を使用\n});\n\n// ライフサイクルメソッド\nonMounted(() => {\n  birds.value = initializeBirds(numberOfBirds.value, width, height); // モジュール化された関数を使用\n  startAnimation();\n  canvas.value.addEventListener('mousemove', handleMouseMove);\n  canvas.value.addEventListener('touchmove', handleTouchMove, {\n    passive: false,\n  });\n  window.addEventListener('resize', handleResize);\n});\n\nonUnmounted(() => {\n  stopAnimation();\n  canvas.value.removeEventListener('mousemove', handleMouseMove);\n  canvas.value.removeEventListener('touchmove', handleTouchMove);\n  window.removeEventListener('resize', handleResize);\n});\n</script>\n\n","import { h, computed, ref } from 'vue'\n\nexport default function (props, rootRef) {\n  const refocusRef = ref(null)\n\n  const refocusTargetEl = computed(() => {\n    if (props.disable === true) {\n      return null\n    }\n\n    return h('span', {\n      ref: refocusRef,\n      class: 'no-outline',\n      tabindex: -1\n    })\n  })\n\n  function refocusTarget (e) {\n    const root = rootRef.value\n\n    if (e !== void 0 && e.type.indexOf('key') === 0) {\n      if (\n        root !== null\n        && document.activeElement !== root\n        && root.contains(document.activeElement) === true\n      ) {\n        root.focus()\n      }\n    }\n    else if (\n      refocusRef.value !== null\n      && (e === void 0 || (root !== null && root.contains(e.target) === true))\n    ) {\n      refocusRef.value.focus()\n    }\n  }\n\n  return {\n    refocusTargetEl,\n    refocusTarget\n  }\n}\n","export default {\n  xs: 30,\n  sm: 35,\n  md: 40,\n  lg: 50,\n  xl: 60\n}\n","import { h, ref, computed, getCurrentInstance, toRaw } from 'vue'\n\nimport useDark, { useDarkProps } from '../../composables/private.use-dark/use-dark.js'\nimport useSize, { useSizeProps } from '../../composables/private.use-size/use-size.js'\nimport useRefocusTarget from '../../composables/private.use-refocus-target/use-refocus-target.js'\nimport { useFormInject, useFormProps } from '../../composables/use-form/private.use-form.js'\n\nimport optionSizes from '../../utils/private.option-sizes/option-sizes.js'\nimport { stopAndPrevent } from '../../utils/event/event.js'\nimport { hSlot, hMergeSlot } from '../../utils/private.render/render.js'\n\nexport const useCheckboxProps = {\n  ...useDarkProps,\n  ...useSizeProps,\n  ...useFormProps,\n\n  modelValue: {\n    required: true,\n    default: null\n  },\n  val: {},\n\n  trueValue: { default: true },\n  falseValue: { default: false },\n  indeterminateValue: { default: null },\n\n  checkedIcon: String,\n  uncheckedIcon: String,\n  indeterminateIcon: String,\n\n  toggleOrder: {\n    type: String,\n    validator: v => v === 'tf' || v === 'ft'\n  },\n  toggleIndeterminate: Boolean,\n\n  label: String,\n  leftLabel: Boolean,\n\n  color: String,\n  keepColor: Boolean,\n  dense: Boolean,\n\n  disable: Boolean,\n  tabindex: [ String, Number ]\n}\n\nexport const useCheckboxEmits = [ 'update:modelValue' ]\n\nexport default function (type, getInner) {\n  const { props, slots, emit, proxy } = getCurrentInstance()\n  const { $q } = proxy\n\n  const isDark = useDark(props, $q)\n\n  const rootRef = ref(null)\n  const { refocusTargetEl, refocusTarget } = useRefocusTarget(props, rootRef)\n  const sizeStyle = useSize(props, optionSizes)\n\n  const modelIsArray = computed(() =>\n    props.val !== void 0 && Array.isArray(props.modelValue)\n  )\n\n  const index = computed(() => {\n    const val = toRaw(props.val)\n    return modelIsArray.value === true\n      ? props.modelValue.findIndex(opt => toRaw(opt) === val)\n      : -1\n  })\n\n  const isTrue = computed(() => (\n    modelIsArray.value === true\n      ? index.value !== -1\n      : toRaw(props.modelValue) === toRaw(props.trueValue)\n  ))\n\n  const isFalse = computed(() => (\n    modelIsArray.value === true\n      ? index.value === -1\n      : toRaw(props.modelValue) === toRaw(props.falseValue)\n  ))\n\n  const isIndeterminate = computed(() =>\n    isTrue.value === false && isFalse.value === false\n  )\n\n  const tabindex = computed(() => (\n    props.disable === true ? -1 : props.tabindex || 0\n  ))\n\n  const classes = computed(() =>\n    `q-${ type } cursor-pointer no-outline row inline no-wrap items-center`\n    + (props.disable === true ? ' disabled' : '')\n    + (isDark.value === true ? ` q-${ type }--dark` : '')\n    + (props.dense === true ? ` q-${ type }--dense` : '')\n    + (props.leftLabel === true ? ' reverse' : '')\n  )\n\n  const innerClass = computed(() => {\n    const state = isTrue.value === true ? 'truthy' : (isFalse.value === true ? 'falsy' : 'indet')\n    const color = props.color !== void 0 && (\n      props.keepColor === true\n      || (type === 'toggle' ? isTrue.value === true : isFalse.value !== true)\n    )\n      ? ` text-${ props.color }`\n      : ''\n\n    return `q-${ type }__inner relative-position non-selectable q-${ type }__inner--${ state }${ color }`\n  })\n\n  const formAttrs = computed(() => {\n    const prop = { type: 'checkbox' }\n\n    props.name !== void 0 && Object.assign(prop, {\n      // see https://vuejs.org/guide/extras/render-function.html#creating-vnodes (.prop)\n      '.checked': isTrue.value,\n      '^checked': isTrue.value === true ? 'checked' : void 0,\n      name: props.name,\n      value: modelIsArray.value === true\n        ? props.val\n        : props.trueValue\n    })\n\n    return prop\n  })\n\n  const injectFormInput = useFormInject(formAttrs)\n\n  const attributes = computed(() => {\n    const attrs = {\n      tabindex: tabindex.value,\n      role: type === 'toggle' ? 'switch' : 'checkbox',\n      'aria-label': props.label,\n      'aria-checked': isIndeterminate.value === true\n        ? 'mixed'\n        : (isTrue.value === true ? 'true' : 'false')\n    }\n\n    if (props.disable === true) {\n      attrs[ 'aria-disabled' ] = 'true'\n    }\n\n    return attrs\n  })\n\n  function onClick (e) {\n    if (e !== void 0) {\n      stopAndPrevent(e)\n      refocusTarget(e)\n    }\n\n    if (props.disable !== true) {\n      emit('update:modelValue', getNextValue(), e)\n    }\n  }\n\n  function getNextValue () {\n    if (modelIsArray.value === true) {\n      if (isTrue.value === true) {\n        const val = props.modelValue.slice()\n        val.splice(index.value, 1)\n        return val\n      }\n\n      return props.modelValue.concat([ props.val ])\n    }\n\n    if (isTrue.value === true) {\n      if (props.toggleOrder !== 'ft' || props.toggleIndeterminate === false) {\n        return props.falseValue\n      }\n    }\n    else if (isFalse.value === true) {\n      if (props.toggleOrder === 'ft' || props.toggleIndeterminate === false) {\n        return props.trueValue\n      }\n    }\n    else {\n      return props.toggleOrder !== 'ft'\n        ? props.trueValue\n        : props.falseValue\n    }\n\n    return props.indeterminateValue\n  }\n\n  function onKeydown (e) {\n    if (e.keyCode === 13 || e.keyCode === 32) {\n      stopAndPrevent(e)\n    }\n  }\n\n  function onKeyup (e) {\n    if (e.keyCode === 13 || e.keyCode === 32) {\n      onClick(e)\n    }\n  }\n\n  const getInnerContent = getInner(isTrue, isIndeterminate)\n\n  // expose public methods\n  Object.assign(proxy, { toggle: onClick })\n\n  return () => {\n    const inner = getInnerContent()\n\n    props.disable !== true && injectFormInput(\n      inner,\n      'unshift',\n      ` q-${ type }__native absolute q-ma-none q-pa-none`\n    )\n\n    const child = [\n      h('div', {\n        class: innerClass.value,\n        style: sizeStyle.value,\n        'aria-hidden': 'true'\n      }, inner)\n    ]\n\n    if (refocusTargetEl.value !== null) {\n      child.push(refocusTargetEl.value)\n    }\n\n    const label = props.label !== void 0\n      ? hMergeSlot(slots.default, [ props.label ])\n      : hSlot(slots.default)\n\n    label !== void 0 && child.push(\n      h('div', {\n        class: `q-${ type }__label q-anchor--skip`\n      }, label)\n    )\n\n    return h('div', {\n      ref: rootRef,\n      class: classes.value,\n      ...attributes.value,\n      onClick,\n      onKeydown,\n      onKeyup\n    }, child)\n  }\n}\n","import { h, computed } from 'vue'\n\nimport QIcon from '../icon/QIcon.js'\n\nimport useCheckbox, { useCheckboxProps, useCheckboxEmits } from '../checkbox/use-checkbox.js'\n\nimport { createComponent } from '../../utils/private.create/create.js'\n\nexport default createComponent({\n  name: 'QToggle',\n\n  props: {\n    ...useCheckboxProps,\n\n    icon: String,\n    iconColor: String\n  },\n\n  emits: useCheckboxEmits,\n\n  setup (props) {\n    function getInner (isTrue, isIndeterminate) {\n      const icon = computed(() =>\n        (isTrue.value === true\n          ? props.checkedIcon\n          : (isIndeterminate.value === true ? props.indeterminateIcon : props.uncheckedIcon)\n        ) || props.icon\n      )\n\n      const color = computed(() => (isTrue.value === true ? props.iconColor : null))\n\n      return () => [\n        h('div', { class: 'q-toggle__track' }),\n\n        h('div', {\n          class: 'q-toggle__thumb absolute flex flex-center no-wrap'\n        }, icon.value !== void 0\n          ? [\n              h(QIcon, {\n                name: icon.value,\n                color: color.value\n              })\n            ]\n          : void 0\n        )\n      ]\n    }\n\n    return useCheckbox('toggle', getInner)\n  }\n})\n","import { h, ref, computed, onBeforeUnmount, getCurrentInstance } from 'vue'\n\nimport TouchPan from '../../directives/touch-pan/TouchPan.js'\n\nimport useDark, { useDarkProps } from '../../composables/private.use-dark/use-dark.js'\nimport { useFormProps, useFormInject } from '../../composables/use-form/private.use-form.js'\n\nimport { between } from '../../utils/format/format.js'\nimport { position } from '../../utils/event/event.js'\nimport { isNumber, isObject } from '../../utils/is/is.js'\nimport { hDir } from '../../utils/private.render/render.js'\n\nconst markerPrefixClass = 'q-slider__marker-labels'\nconst defaultMarkerConvertFn = v => ({ value: v })\nconst defaultMarkerLabelRenderFn = ({ marker }) => h('div', {\n  key: marker.value,\n  style: marker.style,\n  class: marker.classes\n}, marker.label)\n\n// PGDOWN, LEFT, DOWN, PGUP, RIGHT, UP\nexport const keyCodes = [ 34, 37, 40, 33, 39, 38 ]\n\nexport const useSliderProps = {\n  ...useDarkProps,\n  ...useFormProps,\n\n  min: {\n    type: Number,\n    default: 0\n  },\n  max: {\n    type: Number,\n    default: 100\n  },\n  innerMin: Number,\n  innerMax: Number,\n\n  step: {\n    type: Number,\n    default: 1,\n    validator: v => v >= 0\n  },\n\n  snap: Boolean,\n\n  vertical: Boolean,\n  reverse: Boolean,\n\n  color: String,\n  markerLabelsClass: String,\n\n  label: Boolean,\n  labelColor: String,\n  labelTextColor: String,\n  labelAlways: Boolean,\n  switchLabelSide: Boolean,\n\n  markers: [ Boolean, Number ],\n  markerLabels: [ Boolean, Array, Object, Function ],\n  switchMarkerLabelsSide: Boolean,\n\n  trackImg: String,\n  trackColor: String,\n  innerTrackImg: String,\n  innerTrackColor: String,\n  selectionColor: String,\n  selectionImg: String,\n\n  thumbSize: {\n    type: String,\n    default: '20px'\n  },\n  trackSize: {\n    type: String,\n    default: '4px'\n  },\n\n  disable: Boolean,\n  readonly: Boolean,\n  dense: Boolean,\n\n  tabindex: [ String, Number ],\n\n  thumbColor: String,\n  thumbPath: {\n    type: String,\n    default: 'M 4, 10 a 6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0'\n  }\n}\n\nexport const useSliderEmits = [ 'pan', 'update:modelValue', 'change' ]\n\nexport default function ({ updateValue, updatePosition, getDragging, formAttrs }) {\n  const { props, emit, slots, proxy: { $q } } = getCurrentInstance()\n  const isDark = useDark(props, $q)\n\n  const injectFormInput = useFormInject(formAttrs)\n\n  const active = ref(false)\n  const preventFocus = ref(false)\n  const focus = ref(false)\n  const dragging = ref(false)\n\n  const axis = computed(() => (props.vertical === true ? '--v' : '--h'))\n  const labelSide = computed(() => '-' + (props.switchLabelSide === true ? 'switched' : 'standard'))\n\n  const isReversed = computed(() => (\n    props.vertical === true\n      ? props.reverse === true\n      : props.reverse !== ($q.lang.rtl === true)\n  ))\n\n  const innerMin = computed(() => (\n    isNaN(props.innerMin) === true || props.innerMin < props.min\n      ? props.min\n      : props.innerMin\n  ))\n  const innerMax = computed(() => (\n    isNaN(props.innerMax) === true || props.innerMax > props.max\n      ? props.max\n      : props.innerMax\n  ))\n\n  const editable = computed(() => (\n    props.disable !== true && props.readonly !== true\n    && innerMin.value < innerMax.value\n  ))\n\n  const roundValueFn = computed(() => {\n    if (props.step === 0) {\n      return v => v\n    }\n\n    const decimals = (String(props.step).trim().split('.')[ 1 ] || '').length\n    return v => parseFloat(v.toFixed(decimals))\n  })\n\n  const keyStep = computed(() => (props.step === 0 ? 1 : props.step))\n  const tabindex = computed(() => (editable.value === true ? props.tabindex || 0 : -1))\n\n  const trackLen = computed(() => props.max - props.min)\n  const innerBarLen = computed(() => innerMax.value - innerMin.value)\n\n  const innerMinRatio = computed(() => convertModelToRatio(innerMin.value))\n  const innerMaxRatio = computed(() => convertModelToRatio(innerMax.value))\n\n  const positionProp = computed(() => (\n    props.vertical === true\n      ? (isReversed.value === true ? 'bottom' : 'top')\n      : (isReversed.value === true ? 'right' : 'left')\n  ))\n\n  const sizeProp = computed(() => (props.vertical === true ? 'height' : 'width'))\n  const thicknessProp = computed(() => (props.vertical === true ? 'width' : 'height'))\n  const orientation = computed(() => (props.vertical === true ? 'vertical' : 'horizontal'))\n\n  const attributes = computed(() => {\n    const acc = {\n      role: 'slider',\n      'aria-valuemin': innerMin.value,\n      'aria-valuemax': innerMax.value,\n      'aria-orientation': orientation.value,\n      'data-step': props.step\n    }\n\n    if (props.disable === true) {\n      acc[ 'aria-disabled' ] = 'true'\n    }\n    else if (props.readonly === true) {\n      acc[ 'aria-readonly' ] = 'true'\n    }\n\n    return acc\n  })\n\n  const classes = computed(() =>\n    `q-slider q-slider${ axis.value } q-slider--${ active.value === true ? '' : 'in' }active inline no-wrap `\n    + (props.vertical === true ? 'row' : 'column')\n    + (props.disable === true ? ' disabled' : ' q-slider--enabled' + (editable.value === true ? ' q-slider--editable' : ''))\n    + (focus.value === 'both' ? ' q-slider--focus' : '')\n    + (props.label || props.labelAlways === true ? ' q-slider--label' : '')\n    + (props.labelAlways === true ? ' q-slider--label-always' : '')\n    + (isDark.value === true ? ' q-slider--dark' : '')\n    + (props.dense === true ? ' q-slider--dense q-slider--dense' + axis.value : '')\n  )\n\n  function getPositionClass (name) {\n    const cls = 'q-slider__' + name\n    return `${ cls } ${ cls }${ axis.value } ${ cls }${ axis.value }${ labelSide.value }`\n  }\n  function getAxisClass (name) {\n    const cls = 'q-slider__' + name\n    return `${ cls } ${ cls }${ axis.value }`\n  }\n\n  const selectionBarClass = computed(() => {\n    const color = props.selectionColor || props.color\n    return 'q-slider__selection absolute'\n      + (color !== void 0 ? ` text-${ color }` : '')\n  })\n  const markerClass = computed(() => getAxisClass('markers') + ' absolute overflow-hidden')\n  const trackContainerClass = computed(() => getAxisClass('track-container'))\n  const pinClass = computed(() => getPositionClass('pin'))\n  const labelClass = computed(() => getPositionClass('label'))\n  const textContainerClass = computed(() => getPositionClass('text-container'))\n  const markerLabelsContainerClass = computed(() =>\n    getPositionClass('marker-labels-container')\n    + (props.markerLabelsClass !== void 0 ? ` ${ props.markerLabelsClass }` : '')\n  )\n\n  const trackClass = computed(() =>\n    'q-slider__track relative-position no-outline'\n    + (props.trackColor !== void 0 ? ` bg-${ props.trackColor }` : '')\n  )\n  const trackStyle = computed(() => {\n    const acc = { [ thicknessProp.value ]: props.trackSize }\n    if (props.trackImg !== void 0) {\n      acc.backgroundImage = `url(${ props.trackImg }) !important`\n    }\n    return acc\n  })\n\n  const innerBarClass = computed(() =>\n    'q-slider__inner absolute'\n    + (props.innerTrackColor !== void 0 ? ` bg-${ props.innerTrackColor }` : '')\n  )\n  const innerBarStyle = computed(() => {\n    const innerDiff = innerMaxRatio.value - innerMinRatio.value\n    const acc = {\n      [ positionProp.value ]: `${ 100 * innerMinRatio.value }%`,\n      [ sizeProp.value ]: innerDiff === 0\n        ? '2px'\n        : `${ 100 * innerDiff }%`\n    }\n    if (props.innerTrackImg !== void 0) {\n      acc.backgroundImage = `url(${ props.innerTrackImg }) !important`\n    }\n    return acc\n  })\n\n  function convertRatioToModel (ratio) {\n    const { min, max, step } = props\n    let model = min + ratio * (max - min)\n\n    if (step > 0) {\n      const modulo = (model - innerMin.value) % step\n      model += (Math.abs(modulo) >= step / 2 ? (modulo < 0 ? -1 : 1) * step : 0) - modulo\n    }\n\n    model = roundValueFn.value(model)\n\n    return between(model, innerMin.value, innerMax.value)\n  }\n\n  function convertModelToRatio (model) {\n    return trackLen.value === 0\n      ? 0\n      : (model - props.min) / trackLen.value\n  }\n\n  function getDraggingRatio (evt, dragging) {\n    const\n      pos = position(evt),\n      val = props.vertical === true\n        ? between((pos.top - dragging.top) / dragging.height, 0, 1)\n        : between((pos.left - dragging.left) / dragging.width, 0, 1)\n\n    return between(\n      isReversed.value === true ? 1.0 - val : val,\n      innerMinRatio.value,\n      innerMaxRatio.value\n    )\n  }\n\n  const markerStep = computed(() => (\n    isNumber(props.markers) === true ? props.markers : keyStep.value)\n  )\n\n  const markerTicks = computed(() => {\n    const acc = []\n    const step = markerStep.value\n    const max = props.max\n\n    let value = props.min\n    do {\n      acc.push(value)\n      value += step\n    } while (value < max)\n\n    acc.push(max)\n    return acc\n  })\n\n  const markerLabelClass = computed(() => {\n    const prefix = ` ${ markerPrefixClass }${ axis.value }-`\n    return markerPrefixClass\n      + `${ prefix }${ props.switchMarkerLabelsSide === true ? 'switched' : 'standard' }`\n      + `${ prefix }${ isReversed.value === true ? 'rtl' : 'ltr' }`\n  })\n\n  const markerLabelsList = computed(() => {\n    if (props.markerLabels === false) { return null }\n\n    return getMarkerList(props.markerLabels).map((entry, index) => ({\n      index,\n      value: entry.value,\n      label: entry.label || entry.value,\n      classes: markerLabelClass.value\n        + (entry.classes !== void 0 ? ' ' + entry.classes : ''),\n      style: {\n        ...getMarkerLabelStyle(entry.value),\n        ...(entry.style || {})\n      }\n    }))\n  })\n\n  const markerScope = computed(() => ({\n    markerList: markerLabelsList.value,\n    markerMap: markerLabelsMap.value,\n    classes: markerLabelClass.value, // TODO ts definition\n    getStyle: getMarkerLabelStyle\n  }))\n\n  const markerStyle = computed(() => {\n    const size = innerBarLen.value === 0\n      ? '2px'\n      : 100 * markerStep.value / innerBarLen.value\n\n    return {\n      ...innerBarStyle.value,\n      backgroundSize: props.vertical === true\n        ? `2px ${ size }%`\n        : `${ size }% 2px`\n    }\n  })\n\n  function getMarkerList (def) {\n    if (def === false) { return null }\n\n    if (def === true) {\n      return markerTicks.value.map(defaultMarkerConvertFn)\n    }\n\n    if (typeof def === 'function') {\n      return markerTicks.value.map(value => {\n        const item = def(value)\n        return isObject(item) === true ? { ...item, value } : { value, label: item }\n      })\n    }\n\n    const filterFn = ({ value }) => value >= props.min && value <= props.max\n\n    if (Array.isArray(def) === true) {\n      return def\n        .map(item => (isObject(item) === true ? item : { value: item }))\n        .filter(filterFn)\n    }\n\n    return Object.keys(def).map(key => {\n      const item = def[ key ]\n      const value = Number(key)\n      return isObject(item) === true ? { ...item, value } : { value, label: item }\n    }).filter(filterFn)\n  }\n\n  function getMarkerLabelStyle (val) {\n    return { [ positionProp.value ]: `${ 100 * (val - props.min) / trackLen.value }%` }\n  }\n\n  const markerLabelsMap = computed(() => {\n    if (props.markerLabels === false) { return null }\n\n    const acc = {}\n    markerLabelsList.value.forEach(entry => {\n      acc[ entry.value ] = entry\n    })\n    return acc\n  })\n\n  function getMarkerLabelsContent () {\n    if (slots[ 'marker-label-group' ] !== void 0) {\n      return slots[ 'marker-label-group' ](markerScope.value)\n    }\n\n    const fn = slots[ 'marker-label' ] || defaultMarkerLabelRenderFn\n    return markerLabelsList.value.map(marker => fn({\n      marker,\n      ...markerScope.value\n    }))\n  }\n\n  const panDirective = computed(() => {\n    // if editable.value === true\n    return [ [\n      TouchPan,\n      onPan,\n      void 0,\n      {\n        [ orientation.value ]: true,\n        prevent: true,\n        stop: true,\n        mouse: true,\n        mouseAllDir: true\n      }\n    ] ]\n  })\n\n  function onPan (event) {\n    if (event.isFinal === true) {\n      if (dragging.value !== void 0) {\n        updatePosition(event.evt)\n        // only if touch, because we also have mousedown/up:\n        event.touch === true && updateValue(true)\n        dragging.value = void 0\n        emit('pan', 'end')\n      }\n      active.value = false\n      focus.value = false\n    }\n    else if (event.isFirst === true) {\n      dragging.value = getDragging(event.evt)\n      updatePosition(event.evt)\n      updateValue()\n      active.value = true\n      emit('pan', 'start')\n    }\n    else {\n      updatePosition(event.evt)\n      updateValue()\n    }\n  }\n\n  function onBlur () {\n    focus.value = false\n  }\n\n  function onActivate (evt) {\n    updatePosition(evt, getDragging(evt))\n    updateValue()\n\n    preventFocus.value = true\n    active.value = true\n\n    document.addEventListener('mouseup', onDeactivate, true)\n  }\n\n  function onDeactivate () {\n    preventFocus.value = false\n    active.value = false\n\n    updateValue(true)\n    onBlur()\n\n    document.removeEventListener('mouseup', onDeactivate, true)\n  }\n\n  function onMobileClick (evt) {\n    updatePosition(evt, getDragging(evt))\n    updateValue(true)\n  }\n\n  function onKeyup (evt) {\n    if (keyCodes.includes(evt.keyCode)) {\n      updateValue(true)\n    }\n  }\n\n  function getTextContainerStyle (ratio) {\n    if (props.vertical === true) { return null }\n\n    const p = $q.lang.rtl !== props.reverse ? 1 - ratio : ratio\n    return {\n      transform: `translateX(calc(${ 2 * p - 1 } * ${ props.thumbSize } / 2 + ${ 50 - 100 * p }%))`\n    }\n  }\n\n  function getThumbRenderFn (thumb) {\n    const focusClass = computed(() => (\n      preventFocus.value === false && (focus.value === thumb.focusValue || focus.value === 'both')\n        ? ' q-slider--focus'\n        : ''\n    ))\n\n    const classes = computed(() =>\n      `q-slider__thumb q-slider__thumb${ axis.value } q-slider__thumb${ axis.value }-${ isReversed.value === true ? 'rtl' : 'ltr' } absolute non-selectable`\n      + focusClass.value\n      + (thumb.thumbColor.value !== void 0 ? ` text-${ thumb.thumbColor.value }` : '')\n    )\n\n    const style = computed(() => ({\n      width: props.thumbSize,\n      height: props.thumbSize,\n      [ positionProp.value ]: `${ 100 * thumb.ratio.value }%`,\n      zIndex: focus.value === thumb.focusValue ? 2 : void 0\n    }))\n\n    const pinColor = computed(() => (\n      thumb.labelColor.value !== void 0\n        ? ` text-${ thumb.labelColor.value }`\n        : ''\n    ))\n\n    const textContainerStyle = computed(() => getTextContainerStyle(thumb.ratio.value))\n\n    const textClass = computed(() => (\n      'q-slider__text'\n      + (thumb.labelTextColor.value !== void 0 ? ` text-${ thumb.labelTextColor.value }` : '')\n    ))\n\n    return () => {\n      const thumbContent = [\n        h('svg', {\n          class: 'q-slider__thumb-shape absolute-full',\n          viewBox: '0 0 20 20',\n          'aria-hidden': 'true'\n        }, [\n          h('path', { d: props.thumbPath })\n        ]),\n\n        h('div', { class: 'q-slider__focus-ring fit' })\n      ]\n\n      if (props.label === true || props.labelAlways === true) {\n        thumbContent.push(\n          h('div', {\n            class: pinClass.value + ' absolute fit no-pointer-events' + pinColor.value\n          }, [\n            h('div', {\n              class: labelClass.value,\n              style: { minWidth: props.thumbSize }\n            }, [\n              h('div', {\n                class: textContainerClass.value,\n                style: textContainerStyle.value\n              }, [\n                h('span', { class: textClass.value }, thumb.label.value)\n              ])\n            ])\n          ])\n        )\n\n        if (props.name !== void 0 && props.disable !== true) {\n          injectFormInput(thumbContent, 'push')\n        }\n      }\n\n      return h('div', {\n        class: classes.value,\n        style: style.value,\n        ...thumb.getNodeData()\n      }, thumbContent)\n    }\n  }\n\n  function getContent (selectionBarStyle, trackContainerTabindex, trackContainerEvents, injectThumb) {\n    const trackContent = []\n\n    props.innerTrackColor !== 'transparent' && trackContent.push(\n      h('div', {\n        key: 'inner',\n        class: innerBarClass.value,\n        style: innerBarStyle.value\n      })\n    )\n\n    props.selectionColor !== 'transparent' && trackContent.push(\n      h('div', {\n        key: 'selection',\n        class: selectionBarClass.value,\n        style: selectionBarStyle.value\n      })\n    )\n\n    props.markers !== false && trackContent.push(\n      h('div', {\n        key: 'marker',\n        class: markerClass.value,\n        style: markerStyle.value\n      })\n    )\n\n    injectThumb(trackContent)\n\n    const content = [\n      hDir(\n        'div',\n        {\n          key: 'trackC',\n          class: trackContainerClass.value,\n          tabindex: trackContainerTabindex.value,\n          ...trackContainerEvents.value\n        },\n        [\n          h('div', {\n            class: trackClass.value,\n            style: trackStyle.value\n          }, trackContent)\n        ],\n        'slide',\n        editable.value, () => panDirective.value\n      )\n    ]\n\n    if (props.markerLabels !== false) {\n      const action = props.switchMarkerLabelsSide === true\n        ? 'unshift'\n        : 'push'\n\n      content[ action ](\n        h('div', {\n          key: 'markerL',\n          class: markerLabelsContainerClass.value\n        }, getMarkerLabelsContent())\n      )\n    }\n\n    return content\n  }\n\n  onBeforeUnmount(() => {\n    document.removeEventListener('mouseup', onDeactivate, true)\n  })\n\n  return {\n    state: {\n      active,\n      focus,\n      preventFocus,\n      dragging,\n\n      editable,\n      classes,\n      tabindex,\n      attributes,\n\n      roundValueFn,\n      keyStep,\n      trackLen,\n      innerMin,\n      innerMinRatio,\n      innerMax,\n      innerMaxRatio,\n      positionProp,\n      sizeProp,\n      isReversed\n    },\n\n    methods: {\n      onActivate,\n      onMobileClick,\n      onBlur,\n      onKeyup,\n      getContent,\n      getThumbRenderFn,\n      convertRatioToModel,\n      convertModelToRatio,\n      getDraggingRatio\n    }\n  }\n}\n","import { h, ref, computed, watch, getCurrentInstance } from 'vue'\n\nimport { useFormAttrs } from '../../composables/use-form/private.use-form.js'\n\nimport useSlider, {\n  useSliderProps,\n  useSliderEmits,\n  keyCodes\n} from './use-slider.js'\n\nimport { createComponent } from '../../utils/private.create/create.js'\nimport { between } from '../../utils/format/format.js'\nimport { stopAndPrevent } from '../../utils/event/event.js'\n\nconst getNodeData = () => ({})\n\nexport default createComponent({\n  name: 'QSlider',\n\n  props: {\n    ...useSliderProps,\n\n    modelValue: {\n      required: true,\n      default: null,\n      validator: v => typeof v === 'number' || v === null\n    },\n\n    labelValue: [ String, Number ]\n  },\n\n  emits: useSliderEmits,\n\n  setup (props, { emit }) {\n    const { proxy: { $q } } = getCurrentInstance()\n\n    const { state, methods } = useSlider({\n      updateValue, updatePosition, getDragging,\n      formAttrs: useFormAttrs(props)\n    })\n\n    const rootRef = ref(null)\n    const curRatio = ref(0)\n    const model = ref(0)\n\n    function normalizeModel () {\n      model.value = props.modelValue === null\n        ? state.innerMin.value\n        : between(props.modelValue, state.innerMin.value, state.innerMax.value)\n    }\n\n    watch(\n      () => `${ props.modelValue }|${ state.innerMin.value }|${ state.innerMax.value }`,\n      normalizeModel\n    )\n\n    normalizeModel()\n\n    const modelRatio = computed(() => methods.convertModelToRatio(model.value))\n    const ratio = computed(() => (state.active.value === true ? curRatio.value : modelRatio.value))\n\n    const selectionBarStyle = computed(() => {\n      const acc = {\n        [ state.positionProp.value ]: `${ 100 * state.innerMinRatio.value }%`,\n        [ state.sizeProp.value ]: `${ 100 * (ratio.value - state.innerMinRatio.value) }%`\n      }\n      if (props.selectionImg !== void 0) {\n        acc.backgroundImage = `url(${ props.selectionImg }) !important`\n      }\n      return acc\n    })\n\n    const getThumb = methods.getThumbRenderFn({\n      focusValue: true,\n      getNodeData,\n      ratio,\n      label: computed(() => (\n        props.labelValue !== void 0\n          ? props.labelValue\n          : model.value\n      )),\n      thumbColor: computed(() => props.thumbColor || props.color),\n      labelColor: computed(() => props.labelColor),\n      labelTextColor: computed(() => props.labelTextColor)\n    })\n\n    const trackContainerEvents = computed(() => {\n      if (state.editable.value !== true) {\n        return {}\n      }\n\n      return $q.platform.is.mobile === true\n        ? { onClick: methods.onMobileClick }\n        : {\n            onMousedown: methods.onActivate,\n            onFocus,\n            onBlur: methods.onBlur,\n            onKeydown,\n            onKeyup: methods.onKeyup\n          }\n    })\n\n    function updateValue (change) {\n      if (model.value !== props.modelValue) {\n        emit('update:modelValue', model.value)\n      }\n      change === true && emit('change', model.value)\n    }\n\n    function getDragging () {\n      return rootRef.value.getBoundingClientRect()\n    }\n\n    function updatePosition (event, dragging = state.dragging.value) {\n      const ratio = methods.getDraggingRatio(event, dragging)\n\n      model.value = methods.convertRatioToModel(ratio)\n\n      curRatio.value = props.snap !== true || props.step === 0\n        ? ratio\n        : methods.convertModelToRatio(model.value)\n    }\n\n    function onFocus () {\n      state.focus.value = true\n    }\n\n    function onKeydown (evt) {\n      if (keyCodes.includes(evt.keyCode) === false) return\n\n      stopAndPrevent(evt)\n\n      const\n        stepVal = ([ 34, 33 ].includes(evt.keyCode) ? 10 : 1) * state.keyStep.value,\n        offset = (\n          ([ 34, 37, 40 ].includes(evt.keyCode) ? -1 : 1)\n          * (state.isReversed.value === true ? -1 : 1)\n          * (props.vertical === true ? -1 : 1) * stepVal\n        )\n\n      model.value = between(\n        state.roundValueFn.value(model.value + offset),\n        state.innerMin.value,\n        state.innerMax.value\n      )\n\n      updateValue()\n    }\n\n    return () => {\n      const content = methods.getContent(\n        selectionBarStyle,\n        state.tabindex,\n        trackContainerEvents,\n        node => { node.push(getThumb()) }\n      )\n\n      return h('div', {\n        ref: rootRef,\n        class: state.classes.value + (props.modelValue === null ? ' q-slider--no-value' : ''),\n        ...state.attributes.value,\n        'aria-valuenow': props.modelValue\n      }, content)\n    }\n  }\n})\n","import script from \"./BoidAlgorithm.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./BoidAlgorithm.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__\nimport QPage from 'quasar/src/components/page/QPage.js';\nimport QBtn from 'quasar/src/components/btn/QBtn.js';\nimport QToggle from 'quasar/src/components/toggle/QToggle.js';\nimport QSlider from 'quasar/src/components/slider/QSlider.js';\nimport qInstall from \"../../node_modules/vue-cli-plugin-quasar/lib/runtime.auto-import.js\";\nqInstall(script, 'components', {QPage,QBtn,QToggle,QSlider});\n","import { h, computed } from 'vue'\n\nexport const useFormProps = {\n  name: String\n}\n\nexport function useFormAttrs (props) {\n  return computed(() => ({\n    type: 'hidden',\n    name: props.name,\n    value: props.modelValue\n  }))\n}\n\nexport function useFormInject (formAttrs = {}) {\n  return (child, action, className) => {\n    child[ action ](\n      h('input', {\n        class: 'hidden' + (className || ''),\n        ...formAttrs.value\n      })\n    )\n  }\n}\n\nexport function useFormInputNameAttr (props) {\n  return computed(() => props.name || props.for)\n}\n"],"names":["boidParams","ref","separationDistance","alignmentDistance","cohesionDistance","separationWeight","alignmentWeight","cohesionWeight","maxSpeed","fieldOfView","limitVector","vx","vy","max","magnitude","Math","sqrt","random","ratio","x","y","isInFieldOfView","bird","other","dx","dy","angleToOther","atan2","angleDiff","abs","angle","value","PI","calculateSeparation","neighbors","fx","fy","count","forEach","distance","force","calculateAlignment","calculateCohesion","cx","cy","initializeBirds","numberOfBirds","width","height","birds","i","push","updateMouseBird","mouseBird","mousePosition","_hoisted_1","_hoisted_2","class","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_defineComponent","__name","setup","__props","canvas","min","window","innerWidth","innerHeight","animationId","useMouseBird","handleMouseMove","event","rect","getBoundingClientRect","clientX","left","clientY","top","handleTouchMove","preventDefault","touches","length","touchX","touchY","displaySettings","body","label","separationRadius","alignmentRadius","cohesionRadius","sliders","step","key","watch","newVal","slider","deep","updateBirds","filter","separation","alignment","cohesion","limitedVelocity","drawMouseBird","ctx","getContext","fillStyle","beginPath","arc","fill","drawBird","size","moveTo","cos","sin","lineTo","closePath","strokeStyle","stroke","drawBirds","clearRect","animate","requestAnimationFrame","startAnimation","stopAnimation","cancelAnimationFrame","handleResize","onMounted","addEventListener","passive","onUnmounted","removeEventListener","_ctx","_cache","_component_q_btn","_resolveComponent","_component_q_toggle","_component_q_slider","_component_q_page","_openBlock","_createBlock","default","_withCtx","_createElementVNode","_normalizeClass","$q","screen","xs","sm","style","_normalizeStyle","_unref","ref_key","_createVNode","outline","onClick","_createTextVNode","_","modelValue","$event","_toDisplayString","toFixed","_createElementBlock","_Fragment","_renderList","setting","markers","index","props","rootRef","refocusRef","refocusTargetEl","computed","disable","h","tabindex","refocusTarget","e","root","type","indexOf","document","activeElement","contains","focus","target","md","lg","xl","useCheckboxProps","useDarkProps","useSizeProps","useFormProps","required","val","trueValue","falseValue","indeterminateValue","checkedIcon","String","uncheckedIcon","indeterminateIcon","toggleOrder","validator","v","toggleIndeterminate","Boolean","leftLabel","color","keepColor","dense","Number","useCheckboxEmits","getInner","slots","emit","proxy","getCurrentInstance","isDark","useDark","useRefocusTarget","sizeStyle","useSize","optionSizes","modelIsArray","Array","isArray","toRaw","findIndex","opt","isTrue","isFalse","isIndeterminate","classes","innerClass","state","formAttrs","prop","name","Object","assign","injectFormInput","useFormInject","attributes","attrs","role","stopAndPrevent","getNextValue","slice","splice","concat","onKeydown","keyCode","onKeyup","getInnerContent","toggle","inner","child","hMergeSlot","hSlot","createComponent","icon","iconColor","emits","QIcon","useCheckbox","markerPrefixClass","defaultMarkerConvertFn","defaultMarkerLabelRenderFn","marker","keyCodes","useSliderProps","innerMin","innerMax","snap","vertical","reverse","markerLabelsClass","labelColor","labelTextColor","labelAlways","switchLabelSide","markerLabels","Function","switchMarkerLabelsSide","trackImg","trackColor","innerTrackImg","innerTrackColor","selectionColor","selectionImg","thumbSize","trackSize","readonly","thumbColor","thumbPath","useSliderEmits","updateValue","updatePosition","getDragging","active","preventFocus","dragging","axis","labelSide","isReversed","lang","rtl","isNaN","editable","roundValueFn","decimals","trim","split","parseFloat","keyStep","trackLen","innerBarLen","innerMinRatio","convertModelToRatio","innerMaxRatio","positionProp","sizeProp","thicknessProp","orientation","acc","getPositionClass","cls","getAxisClass","selectionBarClass","markerClass","trackContainerClass","pinClass","labelClass","textContainerClass","markerLabelsContainerClass","trackClass","trackStyle","backgroundImage","innerBarClass","innerBarStyle","innerDiff","convertRatioToModel","model","modulo","between","getDraggingRatio","evt","pos","position","markerStep","isNumber","markerTicks","markerLabelClass","prefix","markerLabelsList","getMarkerList","map","entry","getMarkerLabelStyle","markerScope","markerList","markerMap","markerLabelsMap","getStyle","markerStyle","backgroundSize","def","item","isObject","filterFn","keys","getMarkerLabelsContent","fn","panDirective","TouchPan","onPan","prevent","stop","mouse","mouseAllDir","isFinal","touch","isFirst","onBlur","onActivate","onDeactivate","onMobileClick","includes","getTextContainerStyle","p","transform","getThumbRenderFn","thumb","focusClass","focusValue","zIndex","pinColor","textContainerStyle","textClass","thumbContent","viewBox","d","minWidth","getNodeData","getContent","selectionBarStyle","trackContainerTabindex","trackContainerEvents","injectThumb","trackContent","content","hDir","action","onBeforeUnmount","methods","labelValue","useSlider","useFormAttrs","curRatio","normalizeModel","modelRatio","getThumb","platform","is","mobile","onMousedown","onFocus","change","stepVal","offset","node","__exports__","QPage","className","useFormInputNameAttr","for"],"sourceRoot":""}